;/*FB_PKG_DELIM*/

__d("MWChatTemporarySearchResult",["DisappearingMessagesMode","FBLogger","I64","LSContactBitOffset","LSContactType","LSContactTypeExact","LSContactViewerRelationship","LSInstagramE2EEEligibility","LSIntEnum","LSMessagingThreadTypeUtil","LSRestrictionType","LSThreadBitOffset","LSWhatsAppConnectStatus","MAWDefaultE2eeOneToOneEligibility","MWChatSearchResultType","MWChatTemporarySearchResultUtils","MWLSContactTypeExactUtils","MWLSThreadTitle","MWSearchStandardResultTypeMappings","getLSMediaContactProfilePictureUrl","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a){if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(6))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(7))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(8)))return!0;else return(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(9))}function k(a){if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(1))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(2))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(16))||j(a))return c("MWChatSearchResultType").USER;if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(3))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(14))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(13)))return c("MWChatSearchResultType").GROUP;if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(4)))return c("MWChatSearchResultType").PAGE;if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(5)))return c("MWChatSearchResultType").MESSAGE;c("FBLogger")("messenger_web").warn("Unknown Search Result Type "+(h||(h=d("I64"))).to_string(a));return c("MWChatSearchResultType").USER}function l(a,b){if(!c("gkx")("23433")||!c("gkx")("6710"))return!1;if(b==null)return!1;if(b.startsWith("@"))return!0;if(b.trim().length===b.length&&b.indexOf(".")!==-1)return!0;return b.trim()===a?!0:!1}function m(a){return(a==null?void 0:a.threadType)==null?!1:d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(a.threadType)}function n(a,b){b=l(a.username,b);var e=c("gkx")("6992");if(b&&a.username!=null)return(e&&a.username.length>0?"@":"")+a.username;b=d("MWLSContactTypeExactUtils").isIgContact(a.contactTypeExact);return b&&a.secondaryName!=null?a.secondaryName:""}function o(a){var b=l(a.contextLine,a.query);if(b&&a.contextLine!=null)return a.contextLine;b=m(a);if(b&&a.contextLine!=null)return a.contextLine;return a.contextLine!=null&&c("gkx")("16600")?a.contextLine:""}function a(a,b,e,f,g,j,k){var l=e.contactType,m=e.contactTypeExact;m=d("MWLSContactTypeExactUtils").isIgContact(m);k=n(e,k);var o=f!=null?[f.e2eeEligibility,!(h||(h=d("I64"))).equal(f.e2eeEligibility,(i||(i=d("LSIntEnum"))).ofNumber(c("LSInstagramE2EEEligibility").INELIGIBLE))]:[void 0,void 0],p=o[0];o=o[1];return{defaultE2eeThreadOneToOne:d("MAWDefaultE2eeOneToOneEligibility").isContactDefaultE2eeOneToOneEligible({maybeContact:e}),defaultE2eeThreads:d("LSContactBitOffset").has(80,e),displayName:e.name,hasCutoverThread:d("LSContactBitOffset").has(76,e),id:(h||(h=d("I64"))).to_string(e.id),imageUrl:c("getLSMediaContactProfilePictureUrl")(e),isAiBot:h.equal(e.contactTypeExact,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactTypeExact").GENERATIVE_AI_BOT)),isContact:h.equal(e.contactViewerRelationship,i.ofNumber(c("LSContactViewerRelationship").CONTACT_OF_VIEWER)),isDisappearingModeSettingOn:d("LSContactBitOffset").has(94,e),isE2EE:b===!0,isEPD:h.equal(e.restrictionType,i.ofNumber(c("LSRestrictionType").DATA_PRIVACY)),isGroupsXacEligible:d("LSContactBitOffset").has(68,e),isInstagramAccount:m,isInstamadilloCutover:d("LSContactBitOffset").has(95,e),isInteropEligible:d("LSContactBitOffset").has(67,e),isTTLCClipEnabled:d("LSContactBitOffset").has(96,e),isTTLCGenericXMAShareEnabled:d("LSContactBitOffset").has(97,e),isTTLCMediaShareEnabled:d("LSContactBitOffset").has(98,e),isTTLCStoryShareEnabled:d("LSContactBitOffset").has(99,e),isVerified:(b=d("LSContactBitOffset").has(23,e))!=null?b:!1,isViewerUnconnected:d("MWChatTemporarySearchResultUtils").isViewerUnconnectedForContact(e),isWAEligible:o,matchedTerms:j,rankingScore:a,reachabilityStatus:e.contactReachabilityStatusType,resultIgid:(m=f==null?void 0:f.igId)!=null?m:void 0,resultType:(h||(h=d("I64"))).equal(l,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactType").USER))||!((h||(h=d("I64"))).equal(l,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactType").PAGE))||(h||(h=d("I64"))).equal(l,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactType").PAGE_PERSONA)))?c("MWChatSearchResultType").USER:c("MWChatSearchResultType").PAGE,searchResultType:d("MWSearchStandardResultTypeMappings").mapContactToSearchStandardResultType(e),searchSource:g,section:d("MWChatTemporarySearchResultUtils").getSectionHeaderForContact(e),subtext:k,supportsE2eeSpamdStorage:f!=null?f.supportsE2eeSpamdStorage:void 0,waAddressable:h.equal(e.waConnectStatus,i.ofNumber(c("LSWhatsAppConnectStatus").WHATSAPP_ADDRESSABLE)),waEligibility:p}}function p(a,b,c){var e=a.threadDescription,f=a.threadName;if(e!=null)return e;return f!=null&&f!==""?d("MWLSThreadTitle").getDefaultThreadTitle(void 0,b,c,a.threadType).toString():""}function q(a,b,c){if(!d("LSMessagingThreadTypeUtil").isArmadilloSecureOneToOne(a.threadType))return;a=b.find(function(a){return!(h||(h=d("I64"))).equal(a.contact_id,c)});if(a==null)return;return a.contact_id}function b(a,b,e,f,g,j,k,l,m){var n=p(a,e,j),o=q(a,j,e);o=o!=null?(h||(h=d("I64"))).to_string(o):void 0;return{displayName:d("MWLSThreadTitle").getDefaultThreadTitle(a.threadName,e,j,a.threadType).toString(),id:(h||(h=d("I64"))).to_string(a.threadKey),imageUrl:f,isAiBot:h.equal(a.threadType,(i||(i=d("LSIntEnum"))).ofNumber(201)),isContact:!1,isDisappearingModeSettingOn:h.to_int32((e=m==null?void 0:m.igDmSettingsMode)!=null?e:(h||(h=d("I64"))).zero)===c("DisappearingMessagesMode").ON,isE2EE:d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType),isEPD:!1,isInstagramAccount:!1,isInstamadilloCutover:d("LSThreadBitOffset").has(214,a),isTTLCClipEnabled:d("LSThreadBitOffset").has(226,a),isTTLCGenericXMAShareEnabled:d("LSThreadBitOffset").has(231,a),isTTLCMediaShareEnabled:d("LSThreadBitOffset").has(228,a),isTTLCStoryShareEnabled:d("LSThreadBitOffset").has(229,a),isVerified:!1,matchedTerms:l,otherUserId:o,rankingScore:k,resultType:c("MWChatSearchResultType").GROUP,searchResultType:d("MWSearchStandardResultTypeMappings").mapThreadTypeToSearchStandardResultType(a.threadType),searchSource:b,secondaryImageUrl:g,section:"",subtext:n,threadKey:a.threadKey,threadType:a.threadType}}function e(a,b,e){var f,g=(h||(h=d("I64"))).equal(a.type_,(i||(i=d("LSIntEnum"))).ofNumber(1)),l=o(a),m=j(a.type_),n=a.defaultE2eeThreadOneToOne,p=a.defaultE2eeThreads,q=a.hasCutoverThread,r=a.isVerified,s=a.otherUserId,t=a.query,u=a.supportsE2eeSpamdStorage,v=a.waEligibility;f=b!=null?(f=b.displayName)!=null?f:"":"";t===""&&(f=d("MWChatTemporarySearchResultUtils").getSectionHeaderForContactsNullstate());return{canViewerMessage:a.canViewerMessage,communityId:a.communityId,defaultE2eeThreadOneToOne:n!==null?n:void 0,defaultE2eeThreads:p!==null?p:void 0,displayName:a.displayName,hasCutoverThread:q!==null?q:void 0,id:a.resultId,imageUrl:a.profilePicUrl,isAiBot:h.equal(a.type_,i.ofNumber(16)),isContact:g,isDisappearingModeSettingOn:Boolean(a.isDisappearingModeSettingOn),isE2EE:d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType),isEPD:!1,isGroupsXacEligible:a.isGroupsXacEligible,isInstagramAccount:m,isInstamadilloCutover:Boolean(a.isInstamadilloCutover),isInteropEligible:a.isInteropEligible,isRestrictedByViewer:a.isRestrictedByViewer,isTTLCClipEnabled:Boolean(a.hasTtlcClipEnabled),isTTLCGenericXMAShareEnabled:Boolean(a.hasTtlcGenericXmaShareEnabled),isTTLCMediaShareEnabled:Boolean(a.hasTtlcMediaShareEnabled),isTTLCStoryShareEnabled:Boolean(a.hasTtlcStoryShareEnabled),isVerified:r!=null?r:!1,isViewerUnconnected:a.isViewerUnconnected,isWAEligible:v!=null?!(h||(h=d("I64"))).equal(v,(i||(i=d("LSIntEnum"))).ofNumber(c("LSInstagramE2EEEligibility").INELIGIBLE)):void 0,otherUserId:s!=null?(h||(h=d("I64"))).to_string(s):void 0,reachabilityStatus:a.reachabilityStatus,restrictionType:a.restrictionType,resultIgid:a.resultIgid,resultType:k(a.type_),searchResultType:d("MWSearchStandardResultTypeMappings").mapServerSearchResultToSearchStandardResultType(a.threadType,a.type_,e),searchSource:e,secondaryImageUrl:a.secondaryProfilePicUrl,section:f,sectionAnalyticsName:b==null?void 0:b.analyticsName,serverSearchResult:a,subtext:l,subtextAdditional:(t=a.secondaryContextLine)!=null?t:"",supportsE2eeSpamdStorage:u,threadJoinLinkHash:a.threadJoinLinkHash,threadType:a.threadType,waAddressable:a.isWaAddressable,waEligibility:a.waEligibility}}g.checkIsInstagramAccount=j;g.getResultType=k;g.fromContact=a;g.fromThread=b;g.fromServerSearchResult=e}),98);
__d("LSClearTables",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.sequence([function(a){return b.forEach(b.db.table(67).fetch(),function(a){return a["delete"]()})},function(a){return b.forEach(b.db.table(66).fetch(),function(a){return a["delete"]()})},function(a){return b.forEach(b.db.table(65).fetch(),function(a){return a["delete"]()})},function(c){return a[0]===void 0||a[0]===!0?b.forEach(b.db.table(69).fetch(),function(a){return a["delete"]()}):b.resolve()}])},function(a){return b.resolve(c)}])}a.__sproc_name__="LSSearchClearTablesStoredProcedure";a.__tables__=["search_queries","server_search_sections","server_search_results","message_search_results"];e.exports=a}),null);
__d("LSClearTablesStoredProcedure",["LSClearTables","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){e===void 0&&(e={});a=a.storedProcedure(c("LSClearTables"),e.clearMessageResults);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSInsertRankingContacts",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("limit",a[0]),d[1]=c.createArray(),d[5]=(d[1].push("search_contacts"),d[1]),d[2]=c.i64.of_float(Date.now()),d[5]=(d[1].push(c.i64.to_string(d[2])),d[1]),d[3]=c.toJSON(d[1]),d[4]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),d[3],c.i64.cast([0,452]),d[4],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return c.resolve(e)}])}a.__sproc_name__="LSSearchInsertRankingContactsStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSInsertRankingContactsStoredProcedure",["LSInsertRankingContacts","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSInsertRankingContacts"),e.limit);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MWChatSearchInsertRankingContacts",["I64","LSFactory","LSInsertRankingContactsStoredProcedure","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i={contents:!1},j={contents:!1},k=(h||(h=d("I64"))).of_string("100");function a(a){if(!i.contents&&(h||(h=d("I64"))).gt(k,(h||(h=d("I64"))).zero)){i.contents=!0;c("promiseDone")(a.runInTransaction(function(a){return c("LSInsertRankingContactsStoredProcedure")(c("LSFactory")(a),{limit:k})},"readwrite",void 0,void 0,f.id+":39"),function(){j.contents=!0});return}}function b(){return j.contents}g.insertRankingContacts=a;g.isDone=b}),98);
__d("MWLSSyncRankings",["LSIntEnum","MWLSDatabaseLazySync","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i={contents:!1},j={contents:!1};function a(a){if(!i.contents){i.contents=!0;c("promiseDone")(d("MWLSDatabaseLazySync").sync(a,(h||(h=d("LSIntEnum"))).ofNumber(7)),function(){j.contents=!0});return}}function b(){return j.contents}g.sync=a;g.isDone=b}),98);
__d("MWPSearchIndexingSource",["I64","LSIntEnum","ReQL","ReQLSuspense"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){return d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.tables.contacts))}function j(a){return d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.tables.threads).filter(function(a){return(h||(h=d("I64"))).equal(a.threadType,(i||(i=d("LSIntEnum"))).ofNumber(2))}))}function b(a,b){return j(b).then(function(c){var e=new Set(c.map(function(a){return(h||(h=d("I64"))).to_string(a.threadKey)}));return d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(b.tables.participants).filter(function(b){return!(h||(h=d("I64"))).equal(b.contactId,a)&&e.has((h||(h=d("I64"))).to_string(b.threadKey))}).map(function(a){a=[a,d("ReQLSuspense").first(d("ReQL").fromTableAscending(b.tables.contacts).getKeyRange(a.contactId),f.id+":54")];return a}))})}g.fetchContacts=a;g.fetchGroupThreads=j;g.fetchGroupParticipants=b}),98);
__d("MWPOfllineOpenMiniSearchSingleton",["MWPMiniSearch"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWPMiniSearch").createMiniSearchSingleton(function(){return{storeFields:["category"]}});b=a;g["default"]=b}),98);
__d("MWPSearchOfflineOpenConversations",["MWPOfllineOpenMiniSearchSingleton"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return c("MWPOfllineOpenMiniSearchSingleton").getInstance().search(a)}function b(a){c("MWPOfllineOpenMiniSearchSingleton").getInstance().add(a)}function d(a){c("MWPOfllineOpenMiniSearchSingleton").getInstance().remove(a)}g.search=a;g.add=b;g.remove=d}),98);
__d("MWPSearchOfflineSearchTypes",[],(function(a,b,c,d,e,f){"use strict";a="Contact";b="ThreadName";c="ThreadParticipant";d={Contact:a,ThreadName:b,ThreadParticipant:c};f.MWPSearchType=d}),66);
__d("MWPSearchOfflineOpenConversationsUtils",["I64","LSAuthorityLevel","LSContactBitOffset","LSContactBlockedByViewerStatus","LSInitSyncCompleteSubscription","LSIntEnum","LSMessagingThreadTypeUtil","MNetRankType","MWChatSearchResultType","MWChatTemporarySearchResult","MWPSearchOfflineOpenConversations","MWPSearchOfflineSearchTypes","MWSearchThreadUtils","Promise","ReQL","asyncToGeneratorRuntime","cr:20302","gkx","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=c("justknobx")._("5018");function a(a,b){return"p__"+(j||(j=d("I64"))).to_string(a)+"__"+j.to_string(b)}function e(a,e){b("cr:20302")==null||b("cr:20302").qplAddPoint({point:"offline_search_start"});if(p.contents==null){b("cr:20302")==null||b("cr:20302").qplAddPoint({annotations:{string:{offline_search_end_reason:"initial_index_not_started"}},point:"offline_search_end"});return(h||(h=b("Promise"))).resolve([])}var f=p.contents,g=d("MWPSearchOfflineOpenConversations").search(a).filter(function(a){return q(a,e)!==!0});return c("gkx")("6792")===!0?l(f,g,a):d("LSInitSyncCompleteSubscription").maybeWaitForSyncGroup(f,(i||(i=d("LSIntEnum"))).ofNumber(7)).then(function(){return l(f,g,a)})}function l(a,b,c){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){c=o(yield (h||(h=b("Promise"))).all(c.map(function(c){var f=c.category.type;if(f==null)return(h||(h=b("Promise"))).resolve();switch(f){case d("MWPSearchOfflineSearchTypes").MWPSearchType.ThreadParticipant:f=r(c.id);if(f!=null){f=f[0];return w(a,(j||(j=d("I64"))).to_string(f),c.terms)}else return(h||(h=b("Promise"))).resolve();case d("MWPSearchOfflineSearchTypes").MWPSearchType.ThreadName:return w(a,c.id,c.terms);case d("MWPSearchOfflineSearchTypes").MWPSearchType.Contact:return s(a,c.id,c.terms,e)}})));c=n(c.filter(Boolean));b("cr:20302")==null||b("cr:20302").qplAddPoint({point:"offline_search_end"});return c});return m.apply(this,arguments)}function n(a){var b=a.filter(function(a){return a.resultType!==c("MWChatSearchResultType").GROUP}).sort(z);a=a.filter(function(a){return a.resultType===c("MWChatSearchResultType").GROUP}).sort(z);b=b.concat(a);return b}function o(a){if(!k)return a;var b=[],c=new Set();for(a of a)a&&!c.has(a.id)&&(c.add(a.id),b.push(a));return b}var p={contents:void 0};function q(a,b){if(b)return!1;b=a.category;return(b==null?void 0:b.type)==="Contact"?!1:!0}function r(a){a=a.split("__");if(a.length!==3)return;else return[(j||(j=d("I64"))).of_string(a[1]),j.of_string(a[2])]}function s(a,b,c,d,e){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,k){k===void 0&&(k="offline");a=(yield (h||(h=b("Promise"))).all([d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.contacts).getKeyRange((j||(j=d("I64"))).of_string(e))),d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.ig_contact_info).getKeyRange(j.of_string(e))),d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.ranking_scores).getKeyRange(j.of_string(e),(i||(i=d("LSIntEnum"))).ofNumber(c("MNetRankType").MESSENGER_USER_SEARCH)))]));e=a[0];var l=a[1];a=a[2];if(e==null||u(e,g,k))return;return d("MWChatTemporarySearchResult").fromContact(a!=null?a:void 0,void 0,e,l!=null?l:void 0,k,f,g)});return t.apply(this,arguments)}function u(a,b,e){var f=d("LSContactBitOffset").hasWithDefault(66,a,!1);return a.isMemorialized===!0||(j||(j=d("I64"))).equal(a.contactViewerRelationship,(j||(j=d("I64"))).one)&&e!=="null_state_recent"||!(j||(j=d("I64"))).equal(a.blockedByViewerStatus,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED))||f&&v(a.name,b)}function v(a,b,c){c===void 0&&(c=.7);a=a.trim().toLowerCase();b=b.trim().toLowerCase();b=!a.startsWith(b)||b.length/a.length<c;return b}function w(a,b,c){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){c=(yield (h||(h=b("Promise"))).all([d("ReQL").firstExnAsync(d("ReQL").fromTableAscending(a.tables._user_info).map(function(a){return a.facebookUserId})),d("ReQL").firstAsync(d("ReQL").leftJoin(d("ReQL").fromTableAscending(a.tables.threads).getKeyRange((j||(j=d("I64"))).of_string(c)).filter(function(a){return!y(a)}),d("ReQL").fromTableAscending(a.tables.ig_thread_info).getKeyRange(j.of_string(c))))]));var f=c[0];c=c[1];if(c==null)return(h||(h=b("Promise"))).resolve();var g=c[0];c=c[1];a=(yield h.all([d("MWSearchThreadUtils").getThreadPics(g,f,a),d("MWSearchThreadUtils").getThreadParticipants(g,a)]));var i=a[0];a=a[1];var k={contactId:j.zero,contactType:j.zero,score:j.to_float(g.lastActivityTimestampMs),scoreIndex:j.zero,scoreType:j.zero};return d("MWChatTemporarySearchResult").fromThread(g,"offline",f,i[0],i[1],a,k,e,c)});return x.apply(this,arguments)}function y(a){return a.folderName!=="inbox"||d("LSMessagingThreadTypeUtil").isChannelPreview(a.threadType)||d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType)&&d("LSMessagingThreadTypeUtil").isOneToOne(a.threadType)&&(j||(j=d("I64"))).equal(a.authorityLevel,(i||(i=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC))}function z(a,b){a=a.rankingScore;a=a!=null?a.score:0;b=b.rankingScore;b=b!=null?b.score:0;if(b>a)return 1;return b<a?-1:0}g.getGroupParticipantKey=a;g.search=e;g.searchHelper=l;g.db=p;g.mapContact=s;g.mapThread=w}),98);
__d("MWPSearchOpenIndexer",["I64","LSIntEnum","MWPSearchOfflineOpenConversations","MWPSearchOfflineOpenConversationsUtils","MWPSearchOfflineSearchTypes","Promise","ReQL","asyncToGeneratorRuntime","qex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=new Map(),l=new Map(),m=new Map();function n(a){var b=a.id;a=a.name;b=(i||(i=d("I64"))).to_string(b);a={category:{type:d("MWPSearchOfflineSearchTypes").MWPSearchType.Contact},content:a,id:b};d("MWPSearchOfflineOpenConversations").add(a);k.set(b,a)}function o(a){var b=k.get(a);if(b!=null){k["delete"](a);d("MWPSearchOfflineOpenConversations").remove(b);return}}function p(a){var b=a.threadKey;a=a.threadName;if(a==null)return;b=(i||(i=d("I64"))).to_string(b);a={category:{type:d("MWPSearchOfflineSearchTypes").MWPSearchType.ThreadName},content:a,id:b};d("MWPSearchOfflineOpenConversations").add(a);l.set(b,a)}function q(a){var b=l.get(a);if(b!=null){l["delete"](a);d("MWPSearchOfflineOpenConversations").remove(b);return}}function r(a,b){if(b==null)return;var c=d("MWPSearchOfflineOpenConversationsUtils").getGroupParticipantKey(a.threadKey,a.contactId);b=b.name;a.nickname!=null&&(b+=" "+a.nickname);a={category:{type:d("MWPSearchOfflineSearchTypes").MWPSearchType.ThreadParticipant},content:b.trim(),id:c};d("MWPSearchOfflineOpenConversations").add(a);m.set(c,a)}function s(a,b){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.contacts).getKeyRange(b.contactId)));a=(yield u(a,b.threadKey));if(a&&c("qex")._("1843")===!0)return;return r(b,e)});return t.apply(this,arguments)}function u(a,b){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.threads).getKeyRange(b)));return a==null?!1:!(i||(i=d("I64"))).equal(a.threadType,(j||(j=d("LSIntEnum"))).ofNumber(2))});return v.apply(this,arguments)}function w(a,b){a=d("MWPSearchOfflineOpenConversationsUtils").getGroupParticipantKey(a,b);b=m.get(a);if(b!=null){m["delete"](a);d("MWPSearchOfflineOpenConversations").remove(b);return}}function a(a,b){switch(b.operation){case"add":return n(b.value);case"put":o((i||(i=d("I64"))).to_string(a));return n(b.value);case"delete":return o((i||(i=d("I64"))).to_string(a))}}function e(a,b){switch(b.operation){case"add":return p(b.value);case"put":q((i||(i=d("I64"))).to_string(a));return p(b.value);case"delete":return q((i||(i=d("I64"))).to_string(a))}}function f(a,c,d,e){switch(e.operation){case"add":return s(a,e.value);case"put":w(c,d);return s(a,e.value);case"delete":return(h||(h=b("Promise"))).resolve(w(c,d))}}function x(a,b,c,e){d("MWPSearchOfflineOpenConversationsUtils").db.contents=a,b.forEach(n),c.forEach(p),e.forEach(function(a){var b=a[0];a=a[1];return r(b,a)})}g.onContactChanged=a;g.onGroupThreadChanged=e;g.onGroupParticipantChanged=f;g.startInitialIndex=x}),98);
__d("MWPSearchSystem",["CurrentUser","FBLogger","I64","JSScheduler","LSClearTablesStoredProcedure","LSFactory","LSIntEnum","MWChatSearchInsertRankingContacts","MWLSSyncRankings","MWPSearchIndexingSource","MWPSearchOpenIndexer","Promise","ReQL","promiseDone","qex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l={contents:!1},m={contents:!1},n={contents:!1};function a(a){if(!n.contents){n.contents=!0;(i||(i=d("JSScheduler"))).scheduleSpeculativeCallback(function(){d("MWChatSearchInsertRankingContacts").insertRankingContacts(a);d("MWLSSyncRankings").sync(a);var e=(k||(k=d("I64"))).of_string(c("CurrentUser").getID());if(!l.contents){var f;l.contents=!0;f=(f=c("qex")._("1843"))!=null?f:!1;c("promiseDone")((h||(h=b("Promise"))).all([d("MWPSearchIndexingSource").fetchContacts(a),f?d("MWPSearchIndexingSource").fetchGroupThreads(a):(h||(h=b("Promise"))).resolve([]),f?d("MWPSearchIndexingSource").fetchGroupParticipants(e,a):(h||(h=b("Promise"))).resolve([])]).then(function(b){var c=b[0],e=b[1];b=b[2];d("MWPSearchOpenIndexer").startInitialIndex(a,c,e,b)}),function(){m.contents=!0},function(a){c("FBLogger")("messenger_web_search").catching(a).mustfix("Error indexing contacts for search")});d("ReQL").fromTableAscending(a.tables.contacts).subscribe(function(a,b){a=a[0];d("MWPSearchOpenIndexer").onContactChanged(a,b)});f&&(d("ReQL").fromTableAscending(a.tables.threads).filter(function(a){return(k||(k=d("I64"))).equal(a.threadType,(j||(j=d("LSIntEnum"))).ofNumber(2))}).subscribe(function(a,b){a=a[0];d("MWPSearchOpenIndexer").onGroupThreadChanged(a,b)}),d("ReQL").fromTableAscending(a.tables.participants,["contactId","threadKey","nickname"]).filter(function(a){return!(k||(k=d("I64"))).equal(a.contactId,e)}).subscribe(function(b,e){var f=b[0];b=b[1];c("promiseDone")(d("MWPSearchOpenIndexer").onGroupParticipantChanged(a,f,b,e))}))}});return}}function e(a){return a.runInTransaction(function(a){return c("LSClearTablesStoredProcedure")(c("LSFactory")(a),{clearMessageResults:!1})},"readwrite",void 0,void 0,f.id+":123")}function o(){if(d("MWLSSyncRankings").isDone()&&d("MWChatSearchInsertRankingContacts").isDone())return m.contents;else return!1}g.makeAll=a;g.clearAll=e;g.isDone=o}),98);
__d("MWChatSearchSurfaces",["LSIntEnum"],(function(a,b,c,d,e,f,g){"use strict";var h;a={broadcast:(h||(h=d("LSIntEnum"))).ofNumber(6),cmCommunityInviteAllMembers:h.ofNumber(21),cmCommunityInviteFbFriends:h.ofNumber(22),cmInviteAllMembers:h.ofNumber(14),cmInviteFbFriends:h.ofNumber(20),cmMemberList:h.ofNumber(16),cmThreadParticipantSearch:h.ofNumber(17),instagramAll:h.ofNumber(15),omnipicker:h.ofNumber(5),omnipickerArmadillo:h.ofNumber(11),universal:h.ofNumber(1)};b=a;g["default"]=b}),98);
__d("MNetContactItemType",[],(function(a,b,c,d,e,f){a=Object.freeze({CONTACT:0,NON_CONTACT:1,GROUP:2,PAGE:3,BOT:4,GAME:5,IG_USER:6,IG_THREAD:7,STICKER:8,INTEROP_THREAD:9,MSGR_THREAD:10,TEXT_SUGGESTION:11,COMMUNITY_MESSAGING_THREAD:12,IG_PUBLIC_CHANNELS:13,SIDE_CONVERSATIONS_COMMUNITY_MESSAGING_THREAD:14,COMMUNITY_MESSAGING_THREAD_FOR_CC_SECTION:15,BROADCAST_CHAT:16,MSGR_PUBLIC_CHANNEL:17,MSGR_SOCIAL_CHANNEL:18,NETEGO_IG_PUBLIC_CHANNELS:19,CONTACT_BIRTHDAY:20});f["default"]=a}),66);
__d("MWChatSearchFetchCCRecommendations",["fbt","I64","LSIntEnum","LSMessagingThreadTypeUtil","MNetContactItemType","MWChatTemporarySearchResult","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g,h){"use strict";var i=["communityId","contextLine","score","scoreType","secondaryThreadPictureUrl","secondaryThreadPictureUrlFallback","threadKey","threadName","threadPictureUrl","threadPictureUrlFallback","threadType"],j,k,l=3;function a(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){return(j||(j=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(15))?[]:p(yield n(a,l))});return m.apply(this,arguments)}function n(a,b){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.tables.cm_search_nullstate_metadata).filter(function(a){return(j||(j=d("I64"))).equal(a.threadType,(k||(k=d("LSIntEnum"))).ofNumber(18))})));return a.sort(function(a,b){a=a.score;b=b.score;return a===b?0:a>b?1:-1}).slice(0,b)});return o.apply(this,arguments)}function p(a){return a.map(function(a,b){var e=a.communityId,f=a.contextLine,g=a.score,l=a.scoreType,m=a.secondaryThreadPictureUrl,n=a.secondaryThreadPictureUrlFallback,o=a.threadKey,p=a.threadName,q=a.threadPictureUrl;a.threadPictureUrlFallback;var r=a.threadType;babelHelpers.objectWithoutPropertiesLoose(a,i);a={contactId:o,contactType:(k||(k=d("LSIntEnum"))).ofNumber(c("MNetContactItemType").COMMUNITY_MESSAGING_THREAD_FOR_CC_SECTION),score:g,scoreIndex:(j||(j=d("I64"))).of_int32(b),scoreType:l};return{communityId:e!=null?(j||(j=d("I64"))).to_string(e):"",displayName:p,id:j.to_string(o),imageUrl:(g=q!=null?q:m)!=null?g:"",isAiBot:j.equal(r,k.ofNumber(201)),isContact:d("LSMessagingThreadTypeUtil").isOneToOne(r),isDisappearingModeSettingOn:!1,isE2EE:d("LSMessagingThreadTypeUtil").isArmadilloSecure(r),isEPD:!1,isInstagramAccount:!1,isInstamadilloCutover:!1,isTTLCClipEnabled:!1,isTTLCGenericXMAShareEnabled:!1,isTTLCMediaShareEnabled:!1,isTTLCStoryShareEnabled:!1,isVerified:!1,rankingScore:a,resultType:d("MWChatTemporarySearchResult").getResultType(k.ofNumber(13)),searchSource:"server",secondaryImageUrl:(b=m!=null?m:n)!=null?b:"",section:h._(/*BTDS*/"Your channels").toString(),subtext:f!=null?f:"",threadKey:o,threadType:r}})}g.fetchCCs=a;g.mapToSearchResults=p}),226);
__d("MWChatSearchFetchContactRecommendations",["FBLogger","I64","LSContactBitOffset","LSContactTypeExact","LSContactUtils","LSContactViewerRelationship","LSDatabaseSingleton","LSIntEnum","LSWhatsAppConnectStatus","MAWDefaultE2eeOneToOneEligibility","MNetContactItemType","MNetRankType","MWChatTemporarySearchResult","MWGenAIUtils","MWLSContactTypeExactUtils","ReQL","ReQLSuspense","asyncToGeneratorRuntime","getLSMediaContactProfilePictureUrl","gkx","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m=(i||d("react")).useMemo;function n(a){if(a<0)return-1;return a>0?1:0}function o(a){return a.sort(function(a,b){a=a[0];var c=a[0];a=a[1];b=b[0];var d=b[0];b=b[1];if(d.score!==c.score)return n(d.score-c.score);if(a!=null&&b!=null)return n(b.rank-a.rank);return b==null&&a==null?0:b!=null?1:-1})}function p(a){var b=a.contactTypeExact;a=a.contactViewerRelationship;if(d("MWLSContactTypeExactUtils").isIgContact(b)){if((j||(j=d("I64"))).equal(a,(l||(l=d("LSIntEnum"))).ofNumber(c("LSContactViewerRelationship").NOT_CONTACT)))return(l||(l=d("LSIntEnum"))).ofNumber(8);return(j||(j=d("I64"))).equal(a,(l||(l=d("LSIntEnum"))).ofNumber(c("LSContactViewerRelationship").CONTACT_OF_VIEWER))?(l||(l=d("LSIntEnum"))).ofNumber(6):(l||(l=d("LSIntEnum"))).ofNumber(9)}else if((j||(j=d("I64"))).equal(b,(l||(l=d("LSIntEnum"))).ofNumber(c("LSContactTypeExact").GENERATIVE_AI_BOT)))return(l||(l=d("LSIntEnum"))).ofNumber(16);return(l||(l=d("LSIntEnum"))).ofNumber(1)}function q(a){return a.map(function(a,b){var e=a[0],f=e[0];e=e[1];a=a[1];if(e==null||!Boolean(e==null?void 0:e.name)){if(e!=null&&!Boolean(e==null?void 0:e.name)){var g;c("FBLogger")("messenger_web_search").warn("Non-null contact without name field found in search results. contact_type: %s; contact_type_exact: %s",(j||(j=d("I64"))).to_string((g=e.contactType)!=null?g:(j||(j=d("I64"))).minus_one),j.to_string((g=e.contactTypeExact)!=null?g:(j||(j=d("I64"))).minus_one))}return}g=e.contactTypeExact;f=(l||(l=d("LSIntEnum"))).toNumber(f.contactType);var h;d("LSContactBitOffset").has(76,e)&&!c("gkx")("2268")?h=15:h=f===c("MNetContactItemType").GROUP?2:1;var i;switch(f){case c("MNetContactItemType").CONTACT:i=p(e);break;case c("MNetContactItemType").GROUP:i=(l||(l=d("LSIntEnum"))).ofNumber(3);break;case c("MNetContactItemType").PAGE:case c("MNetContactItemType").BOT:case c("MNetContactItemType").GAME:case c("MNetContactItemType").STICKER:i=(l||(l=d("LSIntEnum"))).ofNumber(4);break;case c("MNetContactItemType").IG_THREAD:case c("MNetContactItemType").INTEROP_THREAD:case c("MNetContactItemType").MSGR_THREAD:i=(l||(l=d("LSIntEnum"))).ofNumber(5);break;case c("MNetContactItemType").IG_USER:i=(l||(l=d("LSIntEnum"))).ofNumber(6);break;default:i=(l||(l=d("LSIntEnum"))).ofNumber(2)}f={blockedByViewerStatus:e.blockedByViewerStatus,contextLine:(f=e.secondaryName)!=null?f:"",defaultE2eeThreadOneToOne:d("MAWDefaultE2eeOneToOneEligibility").isContactDefaultE2eeOneToOneEligible({maybeContact:e}),defaultE2eeThreads:d("LSContactBitOffset").has(80,e),displayName:e.name,globalIndex:(j||(j=d("I64"))).of_int32(b),hasCutoverThread:d("LSContactBitOffset").has(76,e),isGroupsXacEligible:d("LSContactBitOffset").has(68,e),isInteropEligible:d("MWLSContactTypeExactUtils").isIgContact(g)?d("LSContactBitOffset").has(67,e):void 0,isVerified:d("LSContactBitOffset").has(23,e),isViewerUnconnected:d("LSContactBitOffset").hasWithDefault(64,e,!0),isWaAddressable:j.equal(e.waConnectStatus,l.ofNumber(c("LSWhatsAppConnectStatus").WHATSAPP_ADDRESSABLE)),profilePicUrl:c("getLSMediaContactProfilePictureUrl")(e),query:"",resultId:j.to_string(e.id),resultIgid:a==null?void 0:a.igId,threadType:l.ofNumber(h),type_:i,waEligibility:a==null?void 0:a.e2eeEligibility};b=d("MWChatTemporarySearchResult").fromServerSearchResult(f,void 0,"offline_nullstate");return[b,e]}).filter(Boolean)}function r(a,b){var c;return(c=d("ReQL")).leftJoin(c.leftJoin(c.fromTableAscending(a.tables.ranking_scores.index("scoreTypeContactId")).getKeyRange(b),c.fromTableAscending(a.tables.contacts)),c.fromTableAscending(a.tables.ig_contact_info))}function a(a){a===void 0&&(a=(l||(l=d("LSIntEnum"))).ofNumber(c("MNetRankType").MESSENGER_USER_SEARCH_NULLSTATE));var b=(h||(h=c("useReStore")))(),e=d("ReQLSuspense").useArray(function(){return r(b,a)},[a,b],f.id+":263");return m(function(){return q(o(e)).filter(function(a){a=a[0];return a.isAiBot===!1&&d("MWGenAIUtils").isMetaAIContact(a.id)===!1})},[e])}function e(a){a===void 0&&(a=(l||(l=d("LSIntEnum"))).ofNumber(c("MNetRankType").MESSENGER_USER_SEARCH_NULLSTATE));return(k||(k=d("LSDatabaseSingleton"))).LSDatabaseSingleton.then(function(b){return d("ReQL").toArrayAsync(r(b,a))}).then(function(a){return q(o(a))})}function s(a,b,c){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){a=(yield d("ReQL").toArrayAsync(r(a,b)));return q(o(a)).filter(function(a){a[0];a=a[1];return((j||(j=d("I64"))).equal(e,(l||(l=d("LSIntEnum"))).ofNumber(5))||(j||(j=d("I64"))).equal(e,(l||(l=d("LSIntEnum"))).ofNumber(11)))&&(d("LSContactUtils").isContactBlocked({blockedByViewerStatus:a.blockedByViewerStatus})||c("gkx")("16094")&&d("LSContactUtils").isContactRestricted(a))?!1:!0}).map(function(a){a=a[0];return a})});return t.apply(this,arguments)}g.sortInPlaceQueryResults=o;g.mapToServerSearchResults=q;g.makeQuery=r;g.useChatSearchContactRecommendations=a;g.fetchRecommendations=e;g.fetchContacts=s}),98);
__d("MWChatSearchFetchGenAIBotRecommendations",["I64","LSContactViewerRelationship","LSIntEnum","LSMessagingThreadTypeUtil","MNetContactItemType","MNetRankType","MWChatSearchResultType","MWChatTemporarySearchResultUtils","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=3;function a(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){return(h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(15))?[]:n(yield l(a,j))});return k.apply(this,arguments)}function l(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.tables.ai_bot_search_metadata)));return a.sort(function(a,b){a=a.score;b=b.score;return a===b?0:a>b?1:-1}).slice(0,b)});return m.apply(this,arguments)}function n(a){return a.map(function(a,b){var e=a.botId,f=a.contactViewerRelationship,g=a.contextLine,j=a.displayName,k=a.displayPictureUrl;a=a.score;a={contactId:e,contactType:(i||(i=d("LSIntEnum"))).ofNumber(c("MNetContactItemType").BOT),score:a,scoreIndex:(h||(h=d("I64"))).of_int32(b),scoreType:i.ofNumber(c("MNetRankType").MESSENGER_USER_SEARCH_NULLSTATE)};return{displayName:j,id:h.to_string(e),imageUrl:k!=null?k:"",isAiBot:!0,isContact:!0,isDisappearingModeSettingOn:!1,isE2EE:d("LSMessagingThreadTypeUtil").isArmadilloSecure(e),isEPD:!1,isInstagramAccount:!1,isInstamadilloCutover:!1,isTTLCClipEnabled:!1,isTTLCGenericXMAShareEnabled:!1,isTTLCMediaShareEnabled:!1,isTTLCStoryShareEnabled:!1,isVerified:!1,isViewerUnconnected:h.equal(f,i.ofNumber(c("LSContactViewerRelationship").NOT_CONTACT)),rankingScore:a,resultType:c("MWChatSearchResultType").AI_BOT,searchSource:"server",secondaryImageUrl:"",section:d("MWChatTemporarySearchResultUtils").getSectionHeaderForAIBot(),subtext:g!=null?g:"",threadKey:e,threadType:h.of_int32(201)}})}g.fetchGenAIBots=a;g.mapToSearchResults=n}),98);
__d("LSIssueSearchQuery",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.db.table(67).fetch([[[a[0],a[4]]]]).next().then(function(e,f){f=e.done;e=e.value;return f?c.sequence([function(b){return d[1]=c.i64.of_float(Date.now()),c.db.table(67).add({query:a[0],surfaceType:a[4],statusPrimary:c.i64.cast([0,1]),statusSecondary:c.i64.cast([0,1]),startTimeMs:d[1]})},function(e){return d[2]=c.i64.cast([0,0]),d[3]=new c.Map(),d[3].set("query",a[0]),d[3].set("supported_types",a[1]),d[3].set("session_id",a[2]),d[3].set("surface_type",a[4]),d[3].set("selected_participants",a[5]),d[3].set("group_id",a[6]),d[3].set("community_id",a[8]),d[3].set("thread_id",a[7]),d[3].set("query_id",a[3]),d[4]=c.createArray(),d[10]=(d[4].push("search_primary"),d[4]),d[5]=c.i64.of_float(Date.now()),d[10]=(d[4].push(c.i64.to_string(d[5])),d[4]),d[6]=c.toJSON(d[4]),d[7]=c.toJSON(d[3]),c.storedProcedure(b("LSIssueNewTask"),d[6],c.i64.cast([0,30]),d[7],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),d[2])},function(e){return d[8]=new c.Map(),d[8].set("query",a[0]),d[8].set("supported_types",a[1]),d[8].set("session_id",a[2]),d[8].set("surface_type",a[4]),d[8].set("selected_participants",a[5]),d[8].set("group_id",a[6]),d[8].set("community_id",a[8]),d[8].set("thread_id",a[7]),d[8].set("query_id",a[3]),d[9]=c.toJSON(d[8]),c.storedProcedure(b("LSIssueNewTask"),"search_secondary",c.i64.cast([0,31]),d[9],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}]):(e.item,0)})},function(a){return c.resolve(e)}])}a.__sproc_name__="LSSearchIssueSearchQueryStoredProcedure";a.__tables__=["search_queries"];e.exports=a}),null);
__d("LSIssueSearchQueryStoredProcedure",["LSIssueSearchQuery","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSIssueSearchQuery"),e.query,e.supportedTypes,e.sessionId,e.queryId,e.surfaceType,e.selectedParticipants,e.groupId,e.threadId,e.communityId);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MWChatSearchFetchThreadRecommendations",["I64","LSAuthorityLevel","LSContactBitOffset","LSContactUtils","LSDatabaseSingleton","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadBitOffset","LSWhatsAppConnectStatus","MWChatSearchResultType","MWGetOtherContactOrSelf","MWLSThreadTitle","MWSearchThreadUtils","Promise","ReQL","asyncToGeneratorRuntime","hasDefaultThreadOneToOneCapability"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;function l(a){return d("ReQL").firstExnAsync(d("ReQL").fromTableAscending(a.tables._user_info))}function m(a,b,e,f,g,h,j){var l=(i||(i=d("I64"))).to_float(b.lastActivityTimestampMs);l={contactId:i.zero,contactType:i.zero,score:l,scoreIndex:i.zero,scoreType:i.zero};var m=e.length===2?e.find(function(b){return!(i||(i=d("I64"))).equal(b.contact_id,a)}):null;return{defaultE2eeThreadOneToOne:j!=null?j:void 0,displayName:d("MWLSThreadTitle").getDefaultThreadTitle(b.threadName,a,e,b.threadType).toString(),hasCutoverThread:h!=null?h:void 0,id:i.to_string(b.threadKey),imageUrl:f,isAiBot:i.equal(b.threadType,(k||(k=d("LSIntEnum"))).ofNumber(201)),isContact:!1,isDisappearingModeSettingOn:!1,isE2EE:d("LSMessagingThreadTypeUtil").isArmadilloSecure(b.threadType),isEPD:!1,isInstagramAccount:!1,isInstamadilloCutover:d("LSThreadBitOffset").has(214,b),isTTLCClipEnabled:d("LSThreadBitOffset").has(226,b),isTTLCGenericXMAShareEnabled:d("LSThreadBitOffset").has(231,b),isTTLCMediaShareEnabled:d("LSThreadBitOffset").has(228,b),isTTLCStoryShareEnabled:d("LSThreadBitOffset").has(229,b),isVerified:!1,otherUserName:(j=m==null?void 0:m.name)!=null?j:void 0,rankingScore:l,resultType:d("LSMessagingThreadTypeUtil").isGroup(b.threadType)?c("MWChatSearchResultType").GROUP:c("MWChatSearchResultType").USER,searchSource:"offline_nullstate",secondaryImageUrl:g,section:"",subtext:(e=b.threadDescription)!=null?e:"",threadKey:b.threadKey,threadType:b.threadType,waAddressable:d("LSMessagingThreadTypeUtil").isArmadilloSecureOneToOne(b.threadType)?!n(m):void 0}}function n(a){return a==null?void 0:a.authority_level!=null&&(i||(i=d("I64"))).ge(a.authority_level,(k||(k=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE_PENDING_REPLACEMENT))&&a.wa_connect_status!=null&&(i||(i=d("I64"))).equal(a.wa_connect_status,(k||(k=d("LSIntEnum"))).ofNumber(c("LSWhatsAppConnectStatus").WHATSAPP_NOT_ADDRESSABLE))}function o(a){return d("ReQL").toArrayAsync(d("ReQL").fromTableDescending(a.tables.threads.index("parentThreadKeyLastActivityTimestampMs"))).then(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(c){var d=(yield (h||(h=b("Promise"))).all(c.map(function(b){return q(a,b)})));return c.filter(function(a,b){return!d[b]})});return function(a){return c.apply(this,arguments)}}())}function a(){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield (j||(j=d("LSDatabaseSingleton"))).LSDatabaseSingleton),e=(yield (h||(h=b("Promise"))).all([l(a),o(a)])),f=e[0];e=e[1];return h.all(e.map(function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var g=(yield (h||(h=b("Promise"))).all([d("MWSearchThreadUtils").getThreadPics(e,f.facebookUserId,a),d("MWSearchThreadUtils").getThreadParticipants(e,a),d("LSMessagingThreadTypeUtil").isOpenOneToOne(e.threadType)?d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.cutover_threads).getKeyRange(e.threadKey)):null,d("LSMessagingThreadTypeUtil").isOpenOneToOne(e.threadType)?c("hasDefaultThreadOneToOneCapability")(e.threadKey,a):null])),i=g[0],j=g[1],k=g[2];g=g[3];var l=i[0];i=i[1];return m(f.facebookUserId,e,j,l,i,Boolean(k),g)});return function(a){return e.apply(this,arguments)}}()))});return p.apply(this,arguments)}function q(a,b){if(!(d("LSMessagingThreadTypeUtil").isRecentsSectionAllowedTypes(b.threadType)&&d("LSMessagingThreadTypeUtil").isMessengerOrE2EEInbox(b.folderName)))return!0;if(d("LSMessagingThreadTypeUtil").isArmadilloSecureOneToOne(b.threadType)&&(k||(k=d("LSIntEnum"))).toNumber(b.authorityLevel)<c("LSAuthorityLevel").AUTHORITATIVE)return!0;return d("LSThreadBitOffset").has(44,b)?!0:r(a,b)}function r(a,b){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=(yield (h||(h=b("Promise"))).all([d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.contacts).getKeyRange(c.threadKey)),d("ReQL").firstExnAsync(d("ReQL").fromTableAscending(a.tables._user_info).map(function(a){return a.facebookUserId}))])),f=e[0];e=e[1];c=(yield d("MWGetOtherContactOrSelf").getOtherContactOrSelf(c.threadKey,e,a));e=c!=null?c:f;a=!1;c=!1;f=!1;e&&(a=d("LSContactBitOffset").has(28,e)||d("LSContactBitOffset").has(29,e)||e.blockedByViewerStatus!=null&&d("LSContactUtils").isContactBlocked(e),c=d("LSContactUtils").isContactUnreachable(e),f=d("LSContactUtils").isContactRestricted(e));return a||c||f});return s.apply(this,arguments)}g.fetchThreadRecommendations=a;g.shouldFilterBlockedOrUnreachableUser=r}),98);
__d("MWChatSearchIssueLightspeedQuery",["I64","LSContactBlockedByViewerStatus","LSDatabaseSingleton","LSFactory","LSIntEnum","LSIssueSearchQueryStoredProcedure","LSPlatformWaitForTaskCompletion","LSSearchRequestStatusType","LSVec","MWChatSearchFetchContactRecommendations","MWChatSearchFetchThreadRecommendations","MWChatSearchResultType","MWChatTemporarySearchResult","Promise","ReQL","asyncToGeneratorRuntime","gkx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=c("gkx")("26360");function m(a,b){var e=a[0];a=a[1];var f=[],g=0;e.sort(function(a,b){return(i||(i=d("I64"))).compare(a.globalIndex,b.globalIndex)});a.sort(function(a,b){return(i||(i=d("I64"))).compare(a.globalIndex,b.globalIndex)});for(var h=0,j=e.length;h<j;++h){var k=e[h];while(g<a.length&&(i||(i=d("I64"))).ge(a[g].globalIndex,k.startIndex)&&(i||(i=d("I64"))).le(a[g].globalIndex,k.endIndex)){var l=a[g];f.push(d("MWChatTemporarySearchResult").fromServerSearchResult(l,k,"server"));g+=1}}return f.filter(function(a){if(b)return!0;else return a.resultType!==c("MWChatSearchResultType").GROUP})}function n(a,b,e){var g=e.query;return(k||(k=d("LSDatabaseSingleton"))).LSDatabaseSingleton.then(function(d){return d.runInTransaction(function(d){return c("LSIssueSearchQueryStoredProcedure")(c("LSFactory")(d),{query:g,supportedTypes:c("LSVec").ofArray(a),surfaceType:b})},"readwrite",void 0,void 0,f.id+":105").then(function(){return d})})}function a(a,e,f,g,l){var n=l.query;if(e.length>0&&!e.includes("server"))return(h||(h=b("Promise"))).resolve([]);else return(k||(k=d("LSDatabaseSingleton"))).LSDatabaseSingleton.then(function(b){return c("LSPlatformWaitForTaskCompletion")(b,function(b){return c("LSIssueSearchQueryStoredProcedure")(c("LSFactory")(b),{query:n,supportedTypes:c("LSVec").ofArray(a),surfaceType:f})},"issueSearchQuery").then(function(){return b})}).then(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e,f=(e=d("ReQL")).toArrayAsync(e.fromTableAscending(a.tables.server_search_results).getKeyRange(n).filter(function(a){return(i||(i=d("I64"))).equal(a.blockedByViewerStatus,(j||(j=d("LSIntEnum"))).ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED))}));e=e.toArrayAsync(e.fromTableAscending(a.tables.server_search_sections).getKeyRange(n));a=(yield (h||(h=b("Promise"))).all([e,f]));return m(a,g)});return function(b){return a.apply(this,arguments)}}())}function e(a,c,e,f){return d("MWChatSearchFetchContactRecommendations").fetchRecommendations(f).then(function(a){return(h||(h=b("Promise"))).resolve(a.map(function(a){a=a[0];return a}))})}function o(a,b){if(!b.has(a.resultType))return!0;if(!a.isE2EE&&a.defaultE2eeThreadOneToOne===!0)return!0;if(a.hasCutoverThread===!0)return!0;return a.isAiBot?!0:!1}function p(a){var b=[],c=new Set();a.forEach(function(a){c.has(a.id)||(b.push(a),c.add(a.id))});return b}function q(){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("MWChatSearchFetchThreadRecommendations").fetchThreadRecommendations());if(a.length===0)return[];var b=new Set([c("MWChatSearchResultType").USER,c("MWChatSearchResultType").GROUP]);a=p(a);return a.filter(function(a){return!o(a,b)})});return r.apply(this,arguments)}function s(a,b,e,f){var g=[],h=[],k=[],l=function(){if(g.length===0||h.length===0||k.length!==1)return;(i||(i=d("I64"))).equal(k[0].statusPrimary,(j||(j=d("LSIntEnum"))).ofNumber(c("LSSearchRequestStatusType").PENDING))||f(m([h,g],e))},n=a.tables.server_search_results.subscribe(function(){c("promiseDone")(d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.tables.server_search_results).getKeyRange(b)),function(a){g=a;return l()})}),o=a.tables.server_search_sections.subscribe(function(){c("promiseDone")(d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.tables.server_search_sections).getKeyRange(b)),function(a){h=a;return l()})}),p=a.tables.search_queries.subscribe(function(){c("promiseDone")(d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.tables.search_queries).getKeyRange(b).filter(function(a){return!(i||(i=d("I64"))).equal(a.statusPrimary,(j||(j=d("LSIntEnum"))).ofNumber(c("LSSearchRequestStatusType").PENDING))})),function(a){k=a;return l()})});return function(){n(),o(),p()}}function t(a,e,f,g){return a.tables.search_queries.subscribe(function(k,l){k=k[0];if(k!==e||l.operation==="delete"||(i||(i=d("I64"))).equal(l.value.statusPrimary,(j||(j=d("LSIntEnum"))).ofNumber(c("LSSearchRequestStatusType").PENDING)))return;c("promiseDone")((h||(h=b("Promise"))).all([d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.tables.server_search_results).getKeyRange(e)),d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.tables.server_search_sections).getKeyRange(e))]).then(function(a){var b=a[0];a=a[1];g(m([a,b],f))}))})}function u(a,b,e,f,g,h){var k=g.query;!l?c("promiseDone")(n(b,e,g)):c("promiseDone")(d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.tables.search_queries).getKeyRange(k).filter(function(a){return!(i||(i=d("I64"))).equal(a.statusPrimary,(j||(j=d("LSIntEnum"))).ofNumber(c("LSSearchRequestStatusType").PENDING))})).then(function(c){return c==null||c.length!==1?n(b,e,g):d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.tables.server_search_results).getKeyRange(k)).then(function(c){return c==null||c.length===0?n(b,e,g):d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.tables.server_search_sections).getKeyRange(k)).then(function(a){if(a==null||a.length===0)return n(b,e,g);h(m([a,c],f))})})}));return s(a,g.query,f,h)}function v(a,b,d,e,g,h){e=t(a,g.query,e,h);c("promiseDone")(a.runInTransaction(function(a){return a.search_queries["delete"](g.query,d)},"readwrite",void 0,void 0,f.id+":436").then(function(){return n(b,d,g)}));return e}g.toSearchResults=m;g.makeSearchQuery=n;g.fetchResults=a;g.fetchRecommendations=e;g.shouldFilterSearchResultsForSharingNS=o;g.dedupeByThreadKey=p;g.fetchThreadRecommendations=q;g.requestResults=u;g.requestResults_T200619723=v}),98);
__d("MWChatSearchFetchRecommendations",["I64","LSInitSyncCompleteSubscription","LSIntEnum","MWChatSearchFetchCCRecommendations","MWChatSearchFetchContactRecommendations","MWChatSearchFetchGenAIBotRecommendations","MWChatSearchIssueLightspeedQuery","Promise","cr:23417","emptyFunction","gkx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a,e,f,g,k){var m=e.includes((j||(j=d("LSIntEnum"))).ofNumber(13));e=e.includes(j.ofNumber(16));c("promiseDone")((h||(h=b("Promise"))).all([(i||(i=d("I64"))).equal(g,(j||(j=d("LSIntEnum"))).ofNumber(1))&&b("cr:23417")!=null?b("cr:23417").fetchNullStateRecentSearches(a):(h||(h=b("Promise"))).resolve([]),d("MWChatSearchFetchContactRecommendations").fetchContacts(a,f,g),m?d("MWChatSearchFetchCCRecommendations").fetchCCs(a,g):[],e?d("MWChatSearchFetchGenAIBotRecommendations").fetchGenAIBots(a,g):[]]).then(function(a){var b=a[0],c=a[1],d=a[2];a=a[3];b=l(b,c,d,a);return k(b)}))}function a(a,b,e,f,g,h){c("promiseDone")(d("MWChatSearchIssueLightspeedQuery").makeSearchQuery(b,f,g));c("gkx")("15587")?c("promiseDone")(d("LSInitSyncCompleteSubscription").maybeWaitForSyncGroup(a,(j||(j=d("LSIntEnum"))).ofNumber(7)),function(){k(a,b,e,f,h)}):k(a,b,e,f,h);return c("emptyFunction")}function l(a,b,c,d){return[].concat(a,d,c,b)}g.requestRecommendations=a;g.blendSearchResults=l}),98);
__d("MWChatSearchFilteringUtils",["I64","LSMessagingThreadTypeUtil","MAWVerifyThreadCutover","MWChatSearchResultType","MWChatSearchSurfaces","MessengerMSplitFlag","Promise","asyncToGeneratorRuntime","hasDefaultThreadOneToOneCapability"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b){var c=a.map(function(a){if(a.searchSource==="server")return!1;if(l(a,b))return!0;return k(a)?!0:!1});a=a.filter(function(a,b){return c[b]===!1});return a}function e(a,b,c,d,e){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,d,e,f){d===void 0&&(d=!1);e===void 0&&(e=!0);f===void 0&&(f=!1);var g=a;d&&(g=a.filter(function(a){a.key;a=a.rawData;return a.isE2EE}));if(c==null)return g;var h=(yield (i||(i=b("Promise"))).all(g.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(yield p(a,c))return!1;if(yield r(a,c,d,e))return!1;if(f&&a.rawData.isAiBot===!0||n(a))return!1;if(m(a))return!1;return u(a)?!1:!0});return function(b){return a.apply(this,arguments)}}())));g=a.filter(function(a,b){return h[b]});return g});return j.apply(this,arguments)}function k(a){return a.isContact===!0&&a.isViewerUnconnected===!0}function l(a,b){return b===c("MWChatSearchSurfaces").instagramAll?!1:a.isInstagramAccount===!0}function m(a){a=a.rawData;var b=a.canViewerMessage;a=a.isRestrictedByViewer;return a!==!0&&b===!1}function n(a){a=a.rawData;var b=a.isAiBot;a=a.isViewerUnconnected;return b!==!0?!1:c("MessengerMSplitFlag").is_msplit_account||a!==!1}function f(a){var b=[],c=new Set();a.forEach(function(a){c.has(a.key)||(b.push(a),c.add(a.key))});return b}function o(a,b){if(b!=null)return d("LSMessagingThreadTypeUtil").isArmadilloSecure(b.threadType);return a!=null?a.isE2EE===!0:!1}function p(a,b){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=a.rawData;var e=a.defaultE2eeThreadOneToOne,f=a.id,g=a.isE2EE,i=a.otherUserId;a=a.threadType;if(!g||a==null)return!1;if(!d("LSMessagingThreadTypeUtil").isArmadilloSecureOneToOne(a))return!1;return e===!0?!0:yield c("hasDefaultThreadOneToOneCapability")((h||(h=d("I64"))).of_string_opt(i!=null?i:f),b)});return q.apply(this,arguments)}function r(a,c,d,e){e===void 0&&(e=!0);if(d)return(i||(i=b("Promise"))).resolve(!1);else if(e)return s(a,c);return(i||(i=b("Promise"))).resolve(!1)}function s(a,b){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){a=a.rawData;if(a.resultType!==c("MWChatSearchResultType").GROUP)return!1;if(e==null)return!1;var f=a.hasCutoverThread,g=a.isE2EE;a=a.otherUserId;if(!g)return!1;if(a!=null){if(f===!0)return!0;g=(yield d("MAWVerifyThreadCutover").verifyThreadCutover((i||(i=b("Promise"))).resolve(e),(h||(h=d("I64"))).of_string(a)));return g}return!1});return t.apply(this,arguments)}function u(a){a=a.rawData.isRestrictedByViewer;return a===!0}g.filterLocalSearchResults=a;g.filterSearchResults=e;g.dedupeByThreadKey=f;g.getIsE2ee=o}),98);
__d("MWLSSearchIssueSearchQuerySupportedTypes",["LSIntEnum","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h;a=[(h||(h=d("LSIntEnum"))).ofNumber(1),h.ofNumber(3),h.ofNumber(4),h.ofNumber(2),h.ofNumber(6),h.ofNumber(7),h.ofNumber(8),h.ofNumber(9),h.ofNumber(13)].concat(c("gkx")("24112")?[(h||(h=d("LSIntEnum"))).ofNumber(14)]:[]);b=[h.ofNumber(1),h.ofNumber(3),h.ofNumber(4),h.ofNumber(2)];e=[h.ofNumber(1),h.ofNumber(3),h.ofNumber(4),h.ofNumber(2),h.ofNumber(6),h.ofNumber(7),h.ofNumber(8),h.ofNumber(9),h.ofNumber(5)];f=[h.ofNumber(1),h.ofNumber(3),h.ofNumber(4),h.ofNumber(2),h.ofNumber(6),h.ofNumber(7),h.ofNumber(8),h.ofNumber(9)];c=[h.ofNumber(1)];d=[h.ofNumber(1),h.ofNumber(3),h.ofNumber(4),h.ofNumber(6),h.ofNumber(7),h.ofNumber(8),h.ofNumber(9)].concat([h.ofNumber(13)]);var i=[h.ofNumber(1),h.ofNumber(2)],j=[h.ofNumber(1),h.ofNumber(2),h.ofNumber(6),h.ofNumber(7),h.ofNumber(8),h.ofNumber(9)],k=[h.ofNumber(1),h.ofNumber(3),h.ofNumber(2)],l=[h.ofNumber(1),h.ofNumber(2)];g.allSupportedTypes=a;g.supportedTypesForMSplitUser=b;g.allSupportedTypesWithMessageSearch=e;g.armadilloSupportedTypes=f;g.onlyContacts=c;g.broadcastFlowSupportedTypes=d;g.addParticipantBase=i;g.addParticipantXac=j;g.socialChannelsSupportedTypes=k;g.communityDirectInviteSupportedTypes=l}),98);
__d("LsUniversalSearchDataSource",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({LOCAL_BLENDED:0,SERVER_ENTITIES_NAMED_DSQ1:1,SERVER_ENTITIES_NAMED_DSQ2:2});c=a;f["default"]=c}),66);
__d("LsUniversalSearchThreadType",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({ARMADILLO:0,TINCAN:1,OPEN_THREAD:2});c=a;f["default"]=c}),66);
__d("SearchTransportType",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({ARMADILLO:1,TINCAN:2,OPEN_THREAD:3,IG_DJANGO:4,IG_ADVANCED_CRYPTO_TRANSPORT:5,IG_MESSENGER_INFRA:6});c=a;f["default"]=c}),66);
__d("UniversalSearchEndFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("844");b=d("FalcoLoggerInternal").create("universal_search_end",a);e=b;g["default"]=e}),98);
__d("UniversalSearchResultSelectedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("846");b=d("FalcoLoggerInternal").create("universal_search_result_selected",a);e=b;g["default"]=e}),98);
__d("UniversalSearchUISectionType",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({NULL_STATE_RECENTS:1,NULL_STATE_RECENTS_SEE_ALL:2,NULL_STATE_SUGGESTED:3,NULL_STATE_XAC_FOLLOWING:4,QUERY_SUGGESTED:5,QUERY_NON_FOLLOWING:6,QUERY_XAC_FOLLOWING:7,QUERY_XAC_NON_FOLLOWING:8,QUERY_BUSINESSES:9,QUERY_MESSAGES:10,OTHER:11,QUERY_NON_BUSINESSES:12,COMMUNITY_CHATS:13,MORE_COMMUNITY_CHATS:14,RELEVANT_SHARES:15,LATEST_SHARES:16,RECOMMENDED_COMMUNITIES:17,COMMUNITIES_AND_MORE:18,CHANNELS:19,NULL_STATE_NON_FOLLOWING:20,JOINED_CM_AND_CHANNEL:21,JOINED_CM_AND_CHANNEL_SEE_MORE:22,RECOMMENDED_CM_AND_CHANNEL:23,RECOMMENDED_CM_AND_CHANNEL_SEE_MORE:24,AI:25,AI_SEE_MORE:26,CHANNELS_SEE_MORE:27,UNJOINED_COMMUNITY_CHATS:28,MORE_UNJOINED_COMMUNITY_CHATS:29,NS_SUGGESTED_CHANNELS:30,NS_SUGGESTED_CHANNELS_SEE_MORE:31,NULL_STATE_MESSAGES:32,NULL_STATE_SUGGESTED_PROMPT:33,NULL_STATE_PYMK:34,QUERY_SUGGESTED_PROMPT:35,INVITE_TO_INSTAGRAM:36,INVITE_TO_INSTAGRAM_SEE_MORE:37,NULL_STATE_GROUP_CHATS:38,NULL_STATE_GROUP_CHATS_SEE_MORE:39,QUERY_NON_FOLLOWING_SEE_MORE:40,META_AI_SNIPPET:41,QUERY_BUSINESSES_SEE_MORE:42,QUERY_MESSAGES_SEE_MORE:43,PHOTOS_AND_VIDEOS:44,PHOTOS_AND_VIDEOS_SEE_MORE:45,LINKS:46,LINKS_SEE_MORE:47,FILES:48,FILES_SEE_MORE:49,PHONE_CONTACTS:50,PHONE_CONTACTS_SEE_MORE:51,NOT_IN_PHONE_CONTACTS:52});c=a;f["default"]=c}),66);
__d("MWSearchLogging",["$InternalEnum","I64","LSMessagingThreadTypeUtil","MWChatSearchResultType","UniversalSearchEndFalcoEvent","UniversalSearchResultSelectedFalcoEvent","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("$InternalEnum")({CM_THREADS:"cm_threads",UNJOINED_GROUPS:"unjoined_groups",NON_CONTACTS:"noncontacts",PAGES:"pages",CONTACTS_GROUPS:"contacts_groups",MESSAGE_SEARCH:"message_search"}),j=function(a){switch(a){case"server":return[1,2];case"offline":case"offline_nullstate":case"secure":return[0];default:return[]}};function k(a){return a===!0?1:3}function a(a){return a===!0?0:2}function l(a,b){var c=b.searchSource,d=b.section;b=b.sectionAnalyticsName;if(a==="")return c==="null_state_recent"?1:3;if(i.cast(b)===i.MESSAGE_SEARCH)return 10;if(c!=="server"||d==="")return 5;a=i.cast(b);if(a==null)return 11;switch(a){case i.CM_THREADS:return 13;case i.CONTACTS_GROUPS:return 5;case i.NON_CONTACTS:return 6;case i.PAGES:return 9;default:return 11}}function m(a){return(a!=null?a:-1).toString()}function e(a,b,e,f){var g=e.rawData,i=g.id,n=g.isE2EE,o=g.isEPD,p=g.renderIndex,q=g.searchResultType,r=g.searchSource,s=g.serverSearchResult,t=m(p),u=i,v=k(n);if(s!=null){u=(p=s.resultId)!=null?p:u;v=d("LSMessagingThreadTypeUtil").isArmadilloSecure(s==null?void 0:s.threadType)?1:3;t=(h||(h=d("I64"))).to_string(s.globalIndex)}c("UniversalSearchResultSelectedFalcoEvent").log(function(){return{data_sources:j(r),is_epd:c("gkx")("23390")||o,search_result:{query_string:b,result_fbid:u,result_index:t,result_type:q!=null?q:7},session_id:a,transport_type:v,ui_section:l(b,g)}});if(!f.current){var w=7;e.rawData.resultType===c("MWChatSearchResultType").MESSAGE&&(w=23);c("UniversalSearchEndFalcoEvent").log(function(){return{end_action:w,is_epd:c("gkx")("24110")||o,session_id:a,transport_type:v}});f.current=!0}}g.SectionAnalyticsNameType=i;g.getLoggingDataSources=j;g.getTransportType=k;g.getLsTransportType=a;g.mapSectionToSearchUISection=l;g.logResultSelected=e}),98);
__d("MWStaticSearchEntries",["fbt","MWChatSearchResultType","MWSearchLogging"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a){var b=h._(/*BTDS*/"Search messages for {param}",[h._param("param",a)]).toString();return{key:a,label:b,rawData:{displayName:b,id:"0",imageUrl:"",isContact:!1,isDisappearingModeSettingOn:!1,isE2EE:!1,isEPD:!1,isInstamadilloCutover:!1,isTTLCClipEnabled:!1,isTTLCGenericXMAShareEnabled:!1,isTTLCMediaShareEnabled:!1,isTTLCStoryShareEnabled:!1,resultType:c("MWChatSearchResultType").MESSAGE,searchResultType:14,secondaryImageUrl:"",sectionAnalyticsName:d("MWSearchLogging").SectionAnalyticsNameType.MESSAGE_SEARCH,subtext:""},type:"entry"}}g.createMessageSearchHeaderEntry=a}),226);
__d("createMWChatSearchTypeaheadDataEntry",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return{key:a.id,label:a.displayName,rawData:{canViewerMessage:a.canViewerMessage,communityId:a.communityId,defaultE2eeThreadOneToOne:a.defaultE2eeThreadOneToOne,defaultE2eeThreads:a.defaultE2eeThreads,displayName:a.displayName,hasCutoverThread:a.hasCutoverThread,id:a.id,igid:a.resultIgid,imageUrl:a.imageUrl,isAiBot:a.isAiBot,isContact:a.isContact,isDisappearingModeSettingOn:a.isDisappearingModeSettingOn,isE2EE:a.isE2EE,isEPD:a.isEPD,isGroupsXacEligible:Boolean(a.isGroupsXacEligible),isInstagramAccount:Boolean(a.isInstagramAccount),isInstamadilloCutover:a.isInstamadilloCutover,isInteropEligible:a.isInteropEligible!==!1,isRestrictedByViewer:a.isRestrictedByViewer,isTTLCClipEnabled:Boolean(a.isTTLCClipEnabled),isTTLCGenericXMAShareEnabled:Boolean(a.isTTLCGenericXMAShareEnabled),isTTLCMediaShareEnabled:Boolean(a.isTTLCMediaShareEnabled),isTTLCStoryShareEnabled:Boolean(a.isTTLCStoryShareEnabled),isViewerUnconnected:a.isViewerUnconnected,isWAEligible:a.isWAEligible,otherUserId:a.otherUserId,rankingScore:a.rankingScore,reachabilityStatus:a.reachabilityStatus,renderIndex:b,resultType:a.resultType,searchResultType:a.searchResultType,searchSource:a.searchSource,secondaryImageUrl:(b=a.secondaryImageUrl)!=null?b:"",section:a.section,sectionAnalyticsName:a.sectionAnalyticsName,serverSearchResult:a.serverSearchResult,subtext:a.subtext,subtextAdditional:a.subtextAdditional,supportsE2eeSpamdStorage:a.supportsE2eeSpamdStorage,threadType:a.threadType,verificationStatus:a.isVerified?"BLUE_VERIFIED":"NOT_VERIFIED",waAddressable:a.waAddressable,waEligibility:a.waEligibility},type:"entry"}}f["default"]=a}),66);
__d("filterInstagramContactsMWChatSearchLocalEntries",["MWChatSearchSurfaces"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return b===c("MWChatSearchSurfaces").instagramAll?a:a.filter(function(a){return!a.isInstagramAccount})}g["default"]=a}),98);
__d("mwChatSearchPayloadDecoratorRemoveExcluded",[],(function(a,b,c,d,e,f){"use strict";var g=["entries"];function a(a){return function(b){var c=b.entries;b=babelHelpers.objectWithoutPropertiesLoose(b,g);return babelHelpers["extends"]({entries:c.filter(function(b){return!a.includes(b.key)})},b)}}f["default"]=a}),66);
__d("mwChatSearchPayloadEnumerate",[],(function(a,b,c,d,e,f){"use strict";var g=["entries"];function a(a){var b=a.entries,c=babelHelpers.objectWithoutPropertiesLoose(a,g),d=(a=a.params)==null?void 0:a.query,e=b.reduce(function(a,b,c){b=b.rawData.section;if(b==null)return a;b===""&&a.set(b,0);var d=a.get(b);d=d==null?c:Math.min(d,c);a.set(b,d);return a},new Map());a=b.map(function(a,b){var c=a.key,f=a.label;a=a.rawData;var g=a.section;return{key:c,label:f,rawData:babelHelpers["extends"]({},a,{query:d,renderIndex:b,sectionRenderIndex:g==null?-1:e.get(g)}),type:"entry"}});return babelHelpers["extends"]({entries:a},c)}f["default"]=a}),66);
__d("sortMWChatSearchLocalResults",["gkx"],(function(a,b,c,d,e,f,g){"use strict";var h={group:1,message:2,messages:3,page:4,user:0},i=c("gkx")("23913");function a(a,b){var c={};for(var d of a){var e;c[d.id]=(e=d.rankingScore)==null?void 0:e.score}e=a.sort(function(a,d){var e=h[a.resultType],f=h[d.resultType];if(e!==f)return e-f;if(i&&b.length>1){e=(f=(e=a.matchedTerms)==null?void 0:e.length)!=null?f:0;f=(f=(f=d.matchedTerms)==null?void 0:f.length)!=null?f:0;if(f!==e)return f-e}e=(f=c[a.id])!=null?f:0;f=(a=c[d.id])!=null?a:0;return f-e});return e}g["default"]=a}),98);
__d("MWChatSearchTypeaheadLightspeedSubscriptionDataSource",["FBLogger","I64","LSIntEnum","MNetRankType","MWChatSearchFetchRecommendations","MWChatSearchFilteringUtils","MWChatSearchIssueLightspeedQuery","MWChatSearchSurfaces","MWLSSearchIssueSearchQuerySupportedTypes","MWPSearchOfflineOpenConversationsUtils","MWPSearchSystem","MWStaticSearchEntries","Promise","asyncToGeneratorRuntime","cr:20302","cr:3752","createMWChatSearchTypeaheadDataEntry","filterInstagramContactsMWChatSearchLocalEntries","isArmadillo","isSearchQualityEnabled","justknobx","mwChatSearchPayloadDecoratorRemoveExcluded","mwChatSearchPayloadEnumerate","promiseDone","relay-runtime/network/RelayObservable","sortMWChatSearchLocalResults"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=10,l=10,m=c("isArmadillo")();a=function(){function a(a){var b=a.database,e=a.excludedIDs;e=e===void 0?[]:e;var f=a.lightspeedSupportedTypes;f=f===void 0?d("MWLSSearchIssueSearchQuerySupportedTypes").allSupportedTypes:f;var g=a.source;g=g===void 0?c("MWChatSearchSurfaces").universal:g;var h=a.includeRecommendations;h=h===void 0?!0:h;var j=a.includeGroupSearch;j=j===void 0?!1:j;var k=a.includeMessageSearchEntry;k=k===void 0?!0:k;var l=a.nullstateRankType;l=l===void 0?c("isSearchQualityEnabled")()?(i||(i=d("LSIntEnum"))).ofNumber(c("MNetRankType").MESSENGER_BLENDED_NULLSTATE):(i||(i=d("LSIntEnum"))).ofNumber(c("MNetRankType").MESSENGER_USER_SEARCH_NULLSTATE):l;a=a.includeAiBots;a=a===void 0?!0:a;this.$1=[];this.$5=function(){};this.$1=e;this.$2=g===c("MWChatSearchSurfaces").omnipickerArmadillo?d("MWLSSearchIssueSearchQuerySupportedTypes").armadilloSupportedTypes:f;this.$3=g;this.$4=b;this.$6=h;this.$7=j;this.$8=k;this.$9=l;this.$10=a;d("MWPSearchSystem").makeAll(b)}var e=a.prototype;e.resolveData=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=b.map(c("createMWChatSearchTypeaheadDataEntry"));b=[].concat(this.$8&&a.query.length>1?[d("MWStaticSearchEntries").createMessageSearchHeaderEntry(a.query)]:[],b);b=d("MWChatSearchFilteringUtils").dedupeByThreadKey(b);b=(yield d("MWChatSearchFilteringUtils").filterSearchResults(b,this.$4,!1,m,!this.$10));var e=c("mwChatSearchPayloadDecoratorRemoveExcluded")(this.$1);return c("mwChatSearchPayloadEnumerate")(e({entries:b,params:a}))});function e(b,c){return a.apply(this,arguments)}return e}();e.fetchNetwork=function(a){var e=this;b("cr:20302")==null||b("cr:20302").qplAddAnnotations({annotations:{bool:{include_group_search:this.$7},"int":{source:(j||(j=d("I64"))).to_int32(this.$3)}}});this.$5();return c("relay-runtime/network/RelayObservable").create(function(f){if(a.query.length===0){e.$5=e.fetchNullstateResults(a,f);return}var g=[],i=[],j=!1;b("cr:20302")==null||b("cr:20302").qplAddPoint({annotations:{"int":{query_length:a.query.length}},point:"local_query_start"});var k=(h||(h=b("Promise"))).allSettled(e.issueLocalSearchQuery(a)).then(function(){var d=b("asyncToGeneratorRuntime").asyncToGenerator(function*(d){var h=d[0];d=d[1];h=h.status==="fulfilled"?h.value:[];d=d.status==="fulfilled"?d.value:[];b("cr:20302")==null||b("cr:20302").qplAddPoint({annotations:{"int":{offline_search_results_count:d.length,secure_search_results_count:h.length}},point:"local_query_end"});g=e.transformLocalSearchResults(h,d);g=c("sortMWChatSearchLocalResults")(g,a.query);b("cr:20302")==null||b("cr:20302").qplAddPoint({point:"resolve_data_start"});h=(yield e.resolveData(a,g.concat(i)));b("cr:20302")==null||b("cr:20302").qplAddPoint({point:"resolve_data_end"});j||f.next(h)});return function(a){return d.apply(this,arguments)}}())["catch"](function(a){c("FBLogger")("messenger_search").catching(a).mustfix("Error performing MWChatSearchIssueMAWFTSQuery.fetchResults")}),l=d("MWChatSearchIssueLightspeedQuery").requestResults_T200619723;c("justknobx")._("2003")&&(l=d("MWChatSearchIssueLightspeedQuery").requestResults);b("cr:20302")==null||b("cr:20302").qplAddPoint({point:"server_query_start"});var m=l(e.$4,e.$2,e.$3,e.$7,a,function(j){b("cr:20302")==null||b("cr:20302").qplAddPoint({annotations:{"int":{server_search_results_count:j.length}},point:"server_query_end"});i=j;j=a.query.length>0&&d("MWPSearchSystem").isDone();var l=j?k:(h||(h=b("Promise"))).resolve();b("cr:20302")==null||b("cr:20302").qplAddPoint({annotations:{bool:{wait_for_local_search:j}},point:"wait_for_local_search_start"});c("promiseDone")(l["finally"](b("asyncToGeneratorRuntime").asyncToGenerator(function*(){b("cr:20302")==null||b("cr:20302").qplAddPoint({point:"wait_for_local_search_end"});b("cr:20302")==null||b("cr:20302").qplAddPoint({point:"resolve_data_start"});var c=(yield e.resolveData(a,g.concat(i)));b("cr:20302")==null||b("cr:20302").qplAddPoint({annotations:{"int":{total_results_count:c.entries.length}},point:"resolve_data_end"});f.next(c);b("cr:20302")==null||b("cr:20302").qplSuccess();f.complete()})))});e.$5=function(){m(),j=!0}})};e.issueLocalSearchQuery=function(a){return[b("cr:3752")!=null?b("cr:3752").fetchResults(this.$2,this.$3,this.$7,a):(h||(h=b("Promise"))).resolve([]),this.$3!==c("MWChatSearchSurfaces").broadcast?d("MWPSearchOfflineOpenConversationsUtils").search(a.query,this.$7):(h||(h=b("Promise"))).resolve([])]};e.transformLocalSearchResults=function(a,b){b=k<=0?b:b.slice(0,k);a=l<=0?a:a.slice(0,l);return b.concat(a)};e.fetchNullstateResults=function(a,e){var f=this;if(!this.$6){e.next({entries:[],params:a});e.complete();return function(){}}b("cr:20302")==null||b("cr:20302").qplAddPoint({annotations:{bool:{should_fetch_community_chats:this.$2.includes((i||(i=d("LSIntEnum"))).ofNumber(13)),should_fetch_genai_bots:this.$2.includes((i||(i=d("LSIntEnum"))).ofNumber(16))},"int":{null_state_rank_type:(j||(j=d("I64"))).to_int32(this.$9)}},point:"null_state_query_start"});return d("MWChatSearchFetchRecommendations").requestRecommendations(this.$4,this.$2,this.$9,this.$3,a,function(){var d=b("asyncToGeneratorRuntime").asyncToGenerator(function*(d){d=c("filterInstagramContactsMWChatSearchLocalEntries")(d,f.$3);b("cr:20302")==null||b("cr:20302").qplAddPoint({point:"null_state_query_end"});b("cr:20302")==null||b("cr:20302").qplAddPoint({point:"resolve_data_start"});d=(yield f.resolveData(a,d));b("cr:20302")==null||b("cr:20302").qplAddPoint({annotations:{"int":{null_state_results_count:d.entries.length}},point:"resolve_data_end"});e.next(d);b("cr:20302")==null||b("cr:20302").qplSuccess();e.complete()});return function(a){return d.apply(this,arguments)}}())};e.setExcludedIds=function(a){this.$1=a};return a}();g["default"]=a}),98);
__d("useIGDCandidateSearchDataSource",["LSIntEnum","MNetRankType","MWChatSearchSurfaces","MWChatSearchTypeaheadLightspeedSubscriptionDataSource","MWLSSearchIssueSearchQuerySupportedTypes","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){var b=a.excludedIDs;a=a.includeGroupSearch;var e=(i||(i=c("useReStore")))();return new(c("MWChatSearchTypeaheadLightspeedSubscriptionDataSource"))({database:e,excludedIDs:b,includeGroupSearch:a,includeRecommendations:!0,lightspeedSupportedTypes:d("MWLSSearchIssueSearchQuerySupportedTypes").allSupportedTypes,nullstateRankType:(h||(h=d("LSIntEnum"))).ofNumber(c("MNetRankType").INSTAGRAM_DIRECT_SEARCH_NULLSTATE),source:c("MWChatSearchSurfaces").instagramAll})}g["default"]=a}),98);
__d("useBaseTypeaheadSubscriptionDataSourceFetchResolverNetwork",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useCallback,j=b.useEffect,k=b.useRef,l=b.useState;function a(a,b){var c=a.dataSource;b===void 0&&(b=!1);a=l(b);b=a[0];var d=a[1],e=k(null);a=i(function(a){var b,f=a.onResolvePayload;a=a.requestParams;(b=e.current)==null||b.unsubscribe();e.current=c.fetchNetwork(a).subscribe({complete:function(){d(!1)},error:function(a){d(!1)},next:function(a){return f(a)},start:function(a){d(!0)},unsubscribe:function(){d(!1)}})},[c]);j(function(){return function(){var a;(a=e.current)==null||a.unsubscribe()}},[]);return[{isLoading:b},a]}g["default"]=a}),98);
__d("useIGDCandidateSearchResults",["IGDAWContactSearchConversionUtils","react","useBaseTypeaheadSubscriptionDataSourceFetchResolverNetwork","useDebouncedComet"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useCallback,j=b.useEffect,k=b.useState;function a(a,b){var e=k(function(){return new Map()}),f=e[0],g=e[1];e=c("useBaseTypeaheadSubscriptionDataSourceFetchResolverNetwork")({dataSource:b},!0);b=e[0].isLoading;e=e[1];var h=c("useDebouncedComet")(e),l=i(function(a){g(d("IGDAWContactSearchConversionUtils").covertMWContactSearchResultsToIGDCandidates(a.entries.map(function(a){return babelHelpers["extends"]({},a)})))},[]);j(function(){h({onResolvePayload:l,requestParams:{query:a,requestFlow:"network-upon-approve"}})},[l,a,h]);return[{isLoading:b},f]}g["default"]=a}),98);
__d("IGDChatSearchFetchThreadRecommendations",["DisappearingMessagesMode","I64","LSContactBitOffset","LSContactTypeExact","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadBitOffset","MWChatSearchResultType","MWLSThreadTitle","MWSearchThreadUtils","Promise","ReQL","ReQLSuspense","asyncToGeneratorRuntime","getLSMediaContactProfilePictureUrl","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l;e=j||d("react");var m=e.useEffect,n=e.useState;function o(a){return d("ReQL").firstExnAsync(d("ReQL").fromTableAscending(a.tables._user_info).map(function(a){return a.facebookUserId}))}function p(a,b,c){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){b=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(c.tables.participants).getKeyRange(b).filter(function(b){return!(l||(l=d("I64"))).equal(b.contactId,a)}).map(function(a){return a.contactId})));return b==null?null:d("ReQL").firstAsync(d("ReQL").mergeJoin(d("ReQL").fromTableAscending(c.tables.contacts).getKeyRange(b),d("ReQL").fromTableAscending(c.tables.ig_contact_info).getKeyRange(b)))});return q.apply(this,arguments)}function r(a){return d("ReQL").leftJoin(d("ReQL").fromTableAscending(a.tables.threads),d("ReQL").fromTableAscending(a.tables.ig_thread_info)).filter(function(a){a=a[0];return d("LSMessagingThreadTypeUtil").isMessengerOrE2EEInbox(a.folderName)&&a.cannotReplyReason!=="viewer_not_subscribed"&&a.cannotReplyReason!=="read_only"})}function s(a,b,c){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){var g=(yield o(f));f=(yield (i||(i=b("Promise"))).all([d("MWSearchThreadUtils").getThreadParticipants(a,f),d("MWSearchThreadUtils").getThreadPics(a,g,f)]));var h=f[0];f=f[1];var j=f[0];f=f[1];var m=d("MWLSThreadTitle").getDefaultThreadTitle(a.threadName,g,h,a.threadType);g=d("MWLSThreadTitle").getThreadTitleWithSecondaryNames(a.threadDescription,g,h,a.threadType);h={contactId:(l||(l=d("I64"))).zero,contactType:l.zero,score:l.to_float(a.lastActivityTimestampMs),scoreIndex:l.zero,scoreType:l.zero};return{displayName:m,id:l.to_string(a.threadKey),imageUrl:j,isAiBot:l.equal(a.threadType,(k||(k=d("LSIntEnum"))).ofNumber(201)),isContact:!1,isDisappearingModeSettingOn:l.to_int32((m=e==null?void 0:e.igDmSettingsMode)!=null?m:(l||(l=d("I64"))).zero)===c("DisappearingMessagesMode").ON,isE2EE:d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType),isEPD:!1,isInstagramAccount:!1,isInstamadilloCutover:d("LSThreadBitOffset").has(214,a),isTTLCClipEnabled:d("LSThreadBitOffset").has(226,a),isTTLCGenericXMAShareEnabled:d("LSThreadBitOffset").has(231,a),isTTLCMediaShareEnabled:d("LSThreadBitOffset").has(228,a),isTTLCStoryShareEnabled:d("LSThreadBitOffset").has(229,a),isVerified:!1,rankingScore:h,resultIgid:(e==null?void 0:e.igThreadId)||"",resultType:c("MWChatSearchResultType").GROUP,searchSource:"offline_nullstate",secondaryImageUrl:f,section:"",subtext:g}});return t.apply(this,arguments)}function u(a,b,c){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f=(yield o(e));f=(yield p(f,a.threadKey,e));if(f==null)return null;e=f[0];f=f[1];var g=c("getLSMediaContactProfilePictureUrl")(e),h={contactId:(l||(l=d("I64"))).zero,contactType:l.zero,score:l.to_float(a.lastActivityTimestampMs),scoreIndex:l.zero,scoreType:l.zero};return{displayName:e.name,id:l.to_string(a.threadKey),imageUrl:g,isAiBot:l.equal(e.contactTypeExact,(k||(k=d("LSIntEnum"))).ofNumber(c("LSContactTypeExact").GENERATIVE_AI_BOT)),isContact:!0,isDisappearingModeSettingOn:l.to_int32((g=b==null?void 0:b.igDmSettingsMode)!=null?g:(l||(l=d("I64"))).zero)===c("DisappearingMessagesMode").ON,isE2EE:d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType),isEPD:!1,isInstagramAccount:!0,isInstamadilloCutover:d("LSThreadBitOffset").has(214,a),isTTLCClipEnabled:d("LSThreadBitOffset").has(226,a),isTTLCGenericXMAShareEnabled:d("LSThreadBitOffset").has(231,a),isTTLCMediaShareEnabled:d("LSThreadBitOffset").has(228,a),isTTLCStoryShareEnabled:d("LSThreadBitOffset").has(229,a),isVerified:d("LSContactBitOffset").has(23,e),rankingScore:h,reachabilityStatus:e.contactReachabilityStatusType,resultIgid:f.igId,resultType:c("MWChatSearchResultType").USER,searchSource:"offline_nullstate",section:"",subtext:(b=e.secondaryName)!=null?b:"",waEligibility:f==null?void 0:f.e2eeEligibility}});return v.apply(this,arguments)}function w(a,b){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){a=(yield (i||(i=b("Promise"))).all(a.map(function(a){var b=a[0];a=a[1];var e=d("LSMessagingThreadTypeUtil").isOneToOne(b.threadType);if(e)return u(b,a,c);else return s(b,a,c)})));return a.filter(Boolean).filter(function(a){return!a.isAiBot}).sort(function(a,b){if(a.rankingScore==null)return 1;return b.rankingScore==null?-1:b.rankingScore.score-a.rankingScore.score})});return x.apply(this,arguments)}function a(){var a=n([]),e=a[0],g=a[1],i=(h||(h=c("useReStore")))(),j=d("ReQLSuspense").useArray(function(){return r(i)},[i],f.id+":318");m(function(){var a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield w(j,i));g(a)});return function(){return a.apply(this,arguments)}}();c("promiseDone")(a())},[i,j]);return e}g.useChatSearchThreadRecommendations=a}),98);
__d("useIGDSharesheetThreadRecommendations",["IGDAWContactSearchConversionUtils","IGDChatSearchFetchThreadRecommendations","createMWChatSearchTypeaheadDataEntry"],(function(a,b,c,d,e,f,g){"use strict";var h=["ttlcMessageType"],i=["rawData"];function a(){var a=d("IGDChatSearchFetchThreadRecommendations").useChatSearchThreadRecommendations().map(j);return d("IGDAWContactSearchConversionUtils").covertMWContactSearchResultsToIGDCandidates(a)}function j(a,b){var d=a.ttlcMessageType;a=babelHelpers.objectWithoutPropertiesLoose(a,h);a=c("createMWChatSearchTypeaheadDataEntry")(a,b);b=a.rawData;a=babelHelpers.objectWithoutPropertiesLoose(a,i);return babelHelpers["extends"]({},a,{rawData:babelHelpers["extends"]({},b,{ttlcMessageType:d})})}g.useIGDSharesheetThreadRecommendations=a;g.createIGDChatSearchTypeaheadDataEntry=j}),98);
__d("useIGDMsysContactSearch",["IGDAWContactSearchConversionUtils","LSContactBitOffset","MWChatTemporarySearchResult","MWPSearchSystem","ReQL","ReQLSuspense","isStringNullOrEmpty","promiseDone","react","useAsyncReStore","useIGDCandidateSearchDataSource","useIGDCandidateSearchResults","useIGDSharesheetThreadRecommendations"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useRef,k=b.useState;function a(a,b,e){var f=d("useIGDSharesheetThreadRecommendations").useIGDSharesheetThreadRecommendations();b=c("useIGDCandidateSearchDataSource")({excludedIDs:b,includeGroupSearch:e});b=c("useIGDCandidateSearchResults")(a,b);var g=b[0].isLoading,h=b[1],m=c("useAsyncReStore")(),n=j(!1);b=k(new Map());var o=b[0],p=b[1];i(function(){n.current===!1&&(n.current=!0,c("promiseDone")(m,function(a){d("MWPSearchSystem").makeAll(a)}))},[m]);i(function(){c("isStringNullOrEmpty")(a)&&e===!1&&g===!1&&h.size===0&&c("promiseDone")(m,function(a){a=l(a);p(a)})},[m,a,e,h.size,g]);b=h;c("isStringNullOrEmpty")(a)&&(e?b=f:g===!1&&h.size===0&&(b=o));return{isLoading:g,searchResultItems:b}}function l(a){var b=new Map();a=d("ReQLSuspense").toArray(d("ReQL").mergeJoin(d("ReQL").fromTableAscending(a.tables.contacts),d("ReQL").fromTableAscending(a.tables.ig_contact_info)),f.id+":106");for(a of a){var c=d("MWChatTemporarySearchResult").fromContact(void 0,d("LSContactBitOffset").has(80,a[0]),a[0],a[1],void 0,void 0,void 0);c=babelHelpers["extends"]({},c);c=d("useIGDSharesheetThreadRecommendations").createIGDChatSearchTypeaheadDataEntry(c);c=d("IGDAWContactSearchConversionUtils").convertSearchResultRawDataToIGDUser(c);b.set(c.id,{candidate:c,type:"user"})}return b}g["default"]=a}),98);
__d("IGDMsysContactSearch.react",["react","useIGDMsysContactSearch"],(function(a,b,c,d,e,f,g){"use strict";var h;h||d("react");function a(a){var b=a.children,d=a.excludedIDs,e=a.includeGroupSearch;a=a.searchQuery;a=c("useIGDMsysContactSearch")(a,d,e);d=a.isLoading;e=a.searchResultItems;return b(d,e)}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useIGDPartnershipMessagesDataSourceQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="29553723837605468"}),null);
__d("useIGDPartnershipMessagesDataSourceQuery.graphql",["useIGDPartnershipMessagesDataSourceQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"after_cursor"},c={defaultValue:null,kind:"LocalArgument",name:"before_cursor"},d={defaultValue:10,kind:"LocalArgument",name:"first"},e={defaultValue:null,kind:"LocalArgument",name:"last"},f={defaultValue:null,kind:"LocalArgument",name:"params"},g=[{kind:"Variable",name:"after",variableName:"after_cursor"},{kind:"Variable",name:"before",variableName:"before_cursor"},{kind:"Variable",name:"first",variableName:"first"},{kind:"Variable",name:"last",variableName:"last"},{kind:"Variable",name:"query_params_shape",variableName:"params"}],h={alias:null,args:null,kind:"ScalarField",name:"creator_igid",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"user_name",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"profile_pic_uri_without_fallback",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"is_verified",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:[a,c,d,e,f],kind:"Fragment",metadata:null,name:"useIGDPartnershipMessagesDataSourceQuery",selections:[{alias:null,args:null,concreteType:"PAYCAMBusinessProfileResponsePayload",kind:"LinkedField",name:"cam_business_profile",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"brand_profile",plural:!1,selections:[{alias:null,args:g,concreteType:null,kind:"LinkedField",name:"creator_discovery_search",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[h,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"creator_profile",plural:!1,selections:[i,j,k,l],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[f,c,a,d,e],kind:"Operation",name:"useIGDPartnershipMessagesDataSourceQuery",selections:[{alias:null,args:null,concreteType:"PAYCAMBusinessProfileResponsePayload",kind:"LinkedField",name:"cam_business_profile",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"brand_profile",plural:!1,selections:[m,{alias:null,args:g,concreteType:null,kind:"LinkedField",name:"creator_discovery_search",plural:!1,selections:[m,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"edges",plural:!0,selections:[m,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[m,h,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"creator_profile",plural:!1,selections:[m,i,j,k,l,{kind:"InlineFragment",selections:[n],type:"CAMIGUserProfile",abstractKey:null}],storageKey:null},n],storageKey:null}],storageKey:null}],storageKey:null},n],storageKey:null}],storageKey:null}]},params:{id:b("useIGDPartnershipMessagesDataSourceQuery_facebookRelayOperation"),metadata:{},name:"useIGDPartnershipMessagesDataSourceQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("useIGDPartnershipMessagesDataSource",["FBLogger","MWChatSearchResultType","react","relay-runtime/network/RelayObservable","useCometTypeaheadGraphQLDataSource","useIGDPartnershipMessagesDataSourceQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useMemo,k=h!==void 0?h:h=b("useIGDPartnershipMessagesDataSourceQuery.graphql");function a(a){var b=100,d=c("useCometTypeaheadGraphQLDataSource")({gqlQuery:k,limit:b,normalize:l,queryVariablesBuilderFunction:function(a){a=a.query;return{params:{creator_params:{creator_search_text:a,profile_type:"ALL_BC_ELIGIBLE"},is_type_ahead_search:!0}}}});return j(function(){return{fetchNetwork:function(){try{var b=d.fetchCache(a);if(b.entries.length>0)return c("relay-runtime/network/RelayObservable").create(function(a){a.next(b),a.complete()})}catch(a){c("FBLogger")("partnership_message_search").catching(a).mustfix("Error performing IGDPartnershipMessagesDataQuery.fetchNetwork while fetching from cache")}var e=d.fetchNetwork(a);return c("relay-runtime/network/RelayObservable").create(function(a){e.then(function(b){a.next(b),a.complete()})["catch"](function(a){c("FBLogger")("partnership_message_search").catching(a).mustfix("Error performing IGDPartnershipMessagesDataQuery.fetchNetwork while fetching from the network")})})},resolveData:function(){},setExcludedIds:function(){}}},[a,d])}function l(a){var b;a=(a=a==null||(b=a.cam_business_profile)==null||(b=b.brand_profile)==null||(b=b.creator_discovery_search)==null?void 0:b.edges)!=null?a:[];return m(a,!0)}function m(a,b){return a.map(function(a){var d;d={id:(d=(d=a.node)==null?void 0:d.creator_igid)!=null?d:"",is_onboarded:b,is_verified:(d=(d=a.node)==null||(d=d.creator_profile)==null?void 0:d.is_verified)!=null?d:!1,name:(d=(d=a.node)==null||(d=d.creator_profile)==null?void 0:d.name)!=null?d:"",profile_pic_uri_without_fallback:(d=a.node)==null||(d=d.creator_profile)==null?void 0:d.profile_pic_uri_without_fallback,username:(a=(d=a.node)==null||(d=d.creator_profile)==null?void 0:d.user_name)!=null?a:""};return{key:d.id,label:d.id,rawData:{displayName:d.name||d.username,id:d.id,imageUrl:(a=d.profile_pic_uri_without_fallback)!=null?a:"",isContact:!1,isDisappearingModeSettingOn:!1,isE2EE:!1,isEPD:!1,isInstamadilloCutover:!1,isTTLCClipEnabled:!1,isTTLCGenericXMAShareEnabled:!1,isTTLCMediaShareEnabled:!1,isTTLCStoryShareEnabled:!1,resultType:c("MWChatSearchResultType").USER,secondaryImageUrl:"",subtext:d.username,verificationStatus:d.is_verified?"BLUE_VERIFIED":"NOT_VERIFIED"},type:"entry"}})}g["default"]=a}),98);
__d("useIGDPartnershipMessagesContactSearch.react",["useIGDCandidateSearchResults","useIGDPartnershipMessagesDataSource"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=c("useIGDPartnershipMessagesDataSource")({query:a,requestFlow:"network-upon-approve"});a=c("useIGDCandidateSearchResults")(a,b);b=a[0].isLoading;a=a[1];a=a;return{isLoading:b,searchResultItems:a}}g["default"]=a}),98);
__d("IGDPartnershipMessagesContactSearch.react",["useIGDPartnershipMessagesContactSearch.react"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.children;a=a.searchQuery;a=c("useIGDPartnershipMessagesContactSearch.react")(a);var d=a.isLoading;a=a.searchResultItems;return b(d,a)}g["default"]=a}),98);
__d("IGDContactSearch.react",["IGDMsysContactSearch.react","IGDPartnershipMessagesContactSearch.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.isPartnershipSearch;return b===!0?i.jsx(c("IGDPartnershipMessagesContactSearch.react"),babelHelpers["extends"]({},a)):i.jsx(c("IGDMsysContactSearch.react"),babelHelpers["extends"]({},a))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("IGDContactSearchResultAvatar.react",["FBLogger","IGDFacepile.react","IGDSingleAvatar.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.avatarSize,d=a.candidate,e=a.disabled;e=e===void 0?!1:e;a=a.isSelected;a=a===void 0?!1:a;switch(d.type){case"thread":if(d.candidate.secondaryImageUrl.length>0)return i.jsx(c("IGDFacepile.react"),{firstParticipantURI:d.candidate.imageUrl,isSelected:a,secondParticipantURI:d.candidate.secondaryImageUrl,size:b});else return i.jsx(c("IGDSingleAvatar.react"),{isSelected:a,size:b,src:d.candidate.imageUrl});case"user":return i.jsx(c("IGDSingleAvatar.react"),{alt:d.candidate.threadName,isDisabled:e,isSelected:a,size:b,src:d.candidate.imageUrl});default:throw c("FBLogger")("igd_web").mustfix("Expected recipient of type user or thread",d)}}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("IGDContactSearchResultTitleDebugLabel.react",["fbt","IGDSBox.react","IGDSTextVariants.react","isStringNullOrEmpty","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i;b=i||d("react");c=h._(/*BTDS*/"[DM]").toString();e=h._(/*BTDS*/"[TLC]").toString();function a(a){a=a.candidate;var b=a.candidate.isInstamadilloCutover;b=a.candidate.isDisappearingModeSettingOn;return null;var e="";b&&(e+=TLC_LABEL_DEV_ONLY);isDisappearingModeSettingOn&&(e+=DM_LABEL_DEV_ONLY);return c("isStringNullOrEmpty")(e)?null:React.jsx(c("IGDSBox.react"),{marginStart:1,children:React.jsx(d("IGDSTextVariants.react").IGDSTextBodyEmphasized,{color:"DEPRECATEDGreen",children:e})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("IGDContactSearchResultTextContent.react",["IGDContactSearchResultTitleDebugLabel.react","IGDSBox.react","IGDSTextVariants.react","IGDSVerifiedBadge.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=function(a){switch(a.type){case"user":return a.candidate.isVerified;default:return!1}};function a(a){var b=a.candidate,e=a.disabled;e=e===void 0?!1:e;var f=a.inGrid;f=f===void 0?!1:f;a=a.textSize;a=a===void 0?"medium":a;var g=j(b);a=a==="medium"?d("IGDSTextVariants.react").IGDSTextBody:d("IGDSTextVariants.react").IGDSTextBody2;return i.jsxs(c("IGDSBox.react"),{alignItems:"center",direction:"row",width:f?void 0:"100%",children:[i.jsxs(a,{color:e?"secondaryText":"primaryText",maxLines:f?2:1,textAlign:f?"center":void 0,zeroMargin:!0,children:[i.jsx("span",{children:b.candidate.threadName}),g&&i.jsx("span",babelHelpers["extends"]({className:"x1rg5ohu xdwrcjd x1n2onr6 xnfr1j"},{children:i.jsx(c("IGDSVerifiedBadge.react"),{size:"small"})}))]}),!1]})}a.displayName=a.name+" [from "+f.id+"]";g.IGDContactSearchResultTitle=a}),98);
__d("LsOmnipickerDataSource",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({LOCAL:0,SERVER:1,SERVER_DSQ1:2,SERVER_DSQ2:3});c=a;f["default"]=c}),66);
__d("OmnipickerSearchResultSelectedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("934");b=d("FalcoLoggerInternal").create("omnipicker_search_result_selected",a);e=b;g["default"]=e}),98);
__d("OmnipickerSearchUISectionType",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({NULL_STATE_SUGGESTED:1,NULL_STATE_XAC_FOLLOWING:2,QUERY_SUGGESTED:3,QUERY_NON_FOLLOWING:4,QUERY_XAC_FOLLOWING:5,QUERY_XAC_NON_FOLLOWING:6,QUERY_BUSINESSES:7,OTHER:8,GROUP_CHATS:9,NULL_STATE_SUGGESTED_DIRECT_INVITE:10,NULL_STATE_CATEGORIES_DIRECT_INVITE:11,QUERY_SUGGESTED_DIRECT_INVITE:12,COMMUNITY_CHATS:13,COMMUNITY_CHATS_SEE_MORE:14,AI:15,AI_SEE_MORE:16,AI_PICKER:17,INVITE_TO_INSTAGRAM:18,INVITE_TO_INSTAGRAM_SEE_MORE:19,PHONE_CONTACTS:20,NOT_IN_PHONE_CONTACTS:21});c=a;f["default"]=c}),66);
__d("MWOmnipickerLoggingUtils",["I64","MWSearchLogging","OmnipickerSearchResultSelectedFalcoEvent","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){var c=b.searchSource,d=b.section;b=b.sectionAnalyticsName;return i(a,d,b,c)}function b(a,b){b=b.candidate.chatSearchTypeaheadDataEntry;if(b==null)return 8;b=b.rawData;var c=b.searchSource,d=b.section;b=b.sectionAnalyticsName;return i(a,d,b,c)}function i(a,b,c,e){if(a==="")return 1;if(e!=="server"||b==="")return 3;a=d("MWSearchLogging").SectionAnalyticsNameType.cast(c);if(a==null)return 8;switch(a){case d("MWSearchLogging").SectionAnalyticsNameType.CM_THREADS:return 13;case d("MWSearchLogging").SectionAnalyticsNameType.CONTACTS_GROUPS:return 3;case d("MWSearchLogging").SectionAnalyticsNameType.NON_CONTACTS:return 4;case d("MWSearchLogging").SectionAnalyticsNameType.PAGES:return 7;default:return 8}}var j=function(a){switch(a){case"server":return[2,3];case"offline":case"offline_nullstate":case"secure":return[0];default:return[]}},k=function(a){if(a==null)return{final_score:0,raw_score:0,raw_score_index:"-1",request_id:""};var b=a.score;a=a.scoreIndex;return{final_score:b!=null?b:0,raw_score:b!=null?b:0,raw_score_index:(b=(h||(h=d("I64"))).to_string(a))!=null?b:"-1",request_id:""}};e=function(a,b,d,e,f,g,h,l,m,n,o,p){var q={query_string:a,result_fbid:e,result_index:(g!=null?g:-1).toString(),result_type:h!=null?h:7};c("OmnipickerSearchResultSelectedFalcoEvent").log(function(){return{data_sources:j(l),is_epd:c("gkx")("23390")||p,is_interop_thread:!1,mnet_request:k(f),recipient_ids:b,search_mode:1,search_result:q,session_id:d!=null?d:"",thread_id:null,ui_section:i(a,m,n,l),ui_section_index:(o!=null?o:-1).toString()}})};g.mapSectionToOmnipickerSearchUISection=a;g.mapSectionToOmnipickerSearchUISectionForIG=b;g.getLoggingDataSources=j;g.getMnetRankInfo=k;g.logOmnipickerSearchResultSelectedHelper=e}),98);
__d("OmnipickerSearchEndFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("742");b=d("FalcoLoggerInternal").create("omnipicker_search_end",a);e=b;g["default"]=e}),98);
__d("OmnipickerSearchImpressionFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("744");b=d("FalcoLoggerInternal").create("omnipicker_search_impression",a);e=b;g["default"]=e}),98);
__d("OmnipickerSearchQueryChangedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("928");b=d("FalcoLoggerInternal").create("omnipicker_search_query_changed",a);e=b;g["default"]=e}),98);
__d("OmnipickerSearchStartFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("929");b=d("FalcoLoggerInternal").create("omnipicker_search_start",a);e=b;g["default"]=e}),98);
__d("IGDOmnipickerLoggingUtils",["MWOmnipickerLoggingUtils","OmnipickerSearchEndFalcoEvent","OmnipickerSearchImpressionFalcoEvent","OmnipickerSearchQueryChangedFalcoEvent","OmnipickerSearchStartFalcoEvent","gkx","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,d){if(b==null)return;var e=!0,f=!1;for(var g of a){g[0];var h=g[1];h=h.candidate;h=h.chatSearchTypeaheadDataEntry;if(h==null)return;h=h.rawData;h.isE2EE===!1&&(e=!1);h.isEPD===!0&&(f=!0)}var i=Array.from(a.values()).map(function(a){return(a=a.candidate.chatSearchTypeaheadDataEntry)==null?void 0:a.rawData.searchResultType}).filter(function(a){return a!=null});c("OmnipickerSearchEndFalcoEvent").log(function(){return{end_action:d,is_epd:c("gkx")("23390")||f,recipient_ids:Array.from(a.keys()),result_type:i.at(i.length-1),search_mode:1,session_id:b!=null?b:"",transport_type:e?1:3}})}function b(){var a=c("uuidv4")();c("OmnipickerSearchStartFalcoEvent").log(function(){return{entry_surface:1,is_epd:c("gkx")("23390"),omnipicker_type:1,search_mode:1,session_id:a}});return a}function e(a,b){if(b==null)return;c("OmnipickerSearchQueryChangedFalcoEvent").log(function(){return{query_length:a.length.toString(),query_string:a,search_mode:1,session_id:b}})}f=function(a,b,c,e){if(e==null)return;b=b.candidate.chatSearchTypeaheadDataEntry;if(b==null)return;b=b.rawData;if(b==null)return;d("MWOmnipickerLoggingUtils").logOmnipickerSearchResultSelectedHelper(a,c,e,b.id,b.rankingScore,b.renderIndex,b.searchResultType,b.searchSource,b.section,b.sectionAnalyticsName,b.sectionRenderIndex,b.isEPD)};var h=function(a,b,e,f){if(f==null)return;var g=a.candidate.chatSearchTypeaheadDataEntry;if(g==null)return;g=g.rawData;if(g==null)return;var h=g.id,i=g.isE2EE,j=g.isEPD,k=g.renderIndex,l=g.searchResultType,m=g.searchSource,n=g.sectionRenderIndex,o={query_string:e,result_fbid:h,result_index:(g=k==null?void 0:k.toString())!=null?g:"-1",result_type:l!=null?l:7};c("OmnipickerSearchImpressionFalcoEvent").log(function(){var c;return{data_sources:d("MWOmnipickerLoggingUtils").getLoggingDataSources(m),impression_selected:b,is_epd:j,recipient_ids:[h.toString()],search_mode:1,search_result:o,session_id:f,thread_id:h,transport_type:i?1:3,ui_section:d("MWOmnipickerLoggingUtils").mapSectionToOmnipickerSearchUISectionForIG(e,a),ui_section_index:(c=n==null?void 0:n.toString())!=null?c:"-1"}})};g.logOmnipickerSearchEndFalcoEvent=a;g.logOmnipickerSearchStart=b;g.logOmnipickerSearchQueryChanged=e;g.logIGDOmnipickerSearchResultSelected=f;g.logIGDOmnipickerSearchImpression=h}),98);
__d("IGDOmnipickerSearchLoggingContextProvider.react",["$InternalEnum","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));e=h;d=e.createContext;var j=e.useContext,k=e.useRef;e=b("$InternalEnum")({SHARE_SHEET:1,UNIVERSAL_SEARCH:2,OMNIPICKER:3});var l=d({query:"",searchSessionAbandoned:!1,searchSessionClosed:!1,searchSessionId:null});function a(a){a=a.children;var b=k({query:"",searchSessionAbandoned:!1,searchSessionClosed:!1,searchSessionId:null});return i.jsx(l.Provider,{value:b.current,children:a})}a.displayName=a.name+" [from "+f.id+"]";function c(){return j(l)}g.IGSearchLoggingSurface=e;g.IGDOmnipickerSearchLoggingContextProvider=a;g.useIGDOmnipickerSearchLoggingContext=c}),98);
__d("IGDContactSearchResult.react",["fbt","IGDContactSearchResultAvatar.react","IGDContactSearchResultTextContent.react","IGDInviteModelUtils","IGDOmnipickerLoggingUtils","IGDOmnipickerSearchLoggingContextProvider.react","IGDSCheckbox.react","IGDSListItem.react","JSResourceForInteraction","emptyFunction","mergeRefs","react","useIGDSLazyDialog"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useCallback,l=b.useEffect,m=b.useState,n=h._(/*BTDS*/"Radio selection").toString(),o=c("JSResourceForInteraction")("IGDAlertDialog.react").__setRef("IGDContactSearchResult.react");function a(a){var b=a.avatarSize,e=a.candidate,f=a.hideCheckbox;f=f===void 0?!1:f;var g=a.isSelected,i=a.onPress,l=a.searchType;a=c("useIGDSLazyDialog")(o);var m=a[0];a=e.candidate.isDisappearingModeSettingOn;var r=d("IGDInviteModelUtils").shouldDisableSharingOrForwarding(e.candidate.reachabilityStatus,l),s=k(function(){if(r){m({body:d("IGDInviteModelUtils").getDisableSharingOrForwardingBody(e.candidate.threadName,l),close:h._(/*BTDS*/"OK"),title:d("IGDInviteModelUtils").getDisableSharingOrForwardingTitle(l)});return}i(e)},[e,i,r,l,m]),t=d("IGDOmnipickerSearchLoggingContextProvider.react").useIGDOmnipickerSearchLoggingContext(),u=t.query;t=t.searchSessionId;u=c("mergeRefs")(p(e,g,u,t),q());t=f?void 0:j.jsx(c("IGDSCheckbox.react"),{"aria-label":n,checkboxShape:"circle",isChecked:g,isDashed:a,isDisabled:r,name:"ContactSearchResultCheckbox",onChange:c("emptyFunction"),tabIndex:-1});return j.jsx(c("IGDSListItem.react"),{addOnEnd:t,addOnStart:j.jsx(c("IGDContactSearchResultAvatar.react"),{avatarSize:b,candidate:e,disabled:r}),onPress:s,overlayDisabled:!1,paddingX:4,paddingY:2,ref:u,subtitle:e.candidate.subtext,testid:void 0,title:j.jsx(d("IGDContactSearchResultTextContent.react").IGDContactSearchResultTitle,{candidate:e,disabled:r})})}a.displayName=a.name+" [from "+f.id+"]";function p(a,b,c,e){return k(function(f){if(!f)return;d("IGDOmnipickerLoggingUtils").logIGDOmnipickerSearchImpression(a,b,c,e)},[a,b,c,e])}function q(){var a=m(null),b=a[0];a=a[1];l(function(){if(b){var a=function(a){a.stopImmediatePropagation(),a.preventDefault()};b.addEventListener("mousedown",a);return function(){return b.removeEventListener("mousedown",a)}}},[b]);return a}g.IGDContactSearchResult=a}),226);
__d("IGDSupershareContactSearchResult.react",["fbt","CometPressable.react","IGDContactSearchResultAvatar.react","IGDContactSearchResultTextContent.react","IGDInviteModelUtils","IGDSBox.react","IGDSupershareConstants","JSResourceForInteraction","PolarisUA","react","useIGDSLazyDialog"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react")),k=i.useCallback,l={bottomSheet:{paddingBottom:"xwib8y2",paddingInlineEnd:"x14vy60q",paddingInlineStart:"xyiysdx",paddingTop:"x1y1aw1k",$$css:!0},dialog:{paddingTop:"x1y1aw1k",paddingInlineEnd:"xf159sx",paddingBottom:"xwib8y2",paddingInlineStart:"xmzvs34",$$css:!0},root:{borderStartStartRadius:"xjwep3j",borderStartEndRadius:"x1t39747",borderEndEndRadius:"x1wcsgtt",borderEndStartRadius:"x1pczhz8",justifyContent:"xl56j7k",$$css:!0}},m=c("JSResourceForInteraction")("IGDAlertDialog.react").__setRef("IGDSupershareContactSearchResult.react");function a(a){var b=a.candidate,e=a.isSelected,f=a.onPress,g=a.searchType;a=c("useIGDSLazyDialog")(m);var i=a[0],n=d("IGDInviteModelUtils").shouldDisableSharingOrForwarding(b.candidate.reachabilityStatus,g);a=k(function(){if(n){i({body:d("IGDInviteModelUtils").getDisableSharingOrForwardingBody(b.candidate.threadName,g),close:h._(/*BTDS*/"OK"),title:d("IGDInviteModelUtils").getDisableSharingOrForwardingTitle(g)});return}f(b)},[b,f,n,g,i]);return j.jsx(c("CometPressable.react"),{onPress:a,overlayDisabled:!0,xstyle:[l.root,d("PolarisUA").isDesktop()&&l.dialog,!d("PolarisUA").isDesktop()&&l.bottomSheet],children:j.jsxs(c("IGDSBox.react"),{alignItems:"center","data-testid":void 0,height:d("IGDSupershareConstants").SUPERSHARE_CONTACT_HEIGHT_PX,width:d("IGDSupershareConstants").SUPERSHARE_CONTACT_WIDTH_PX,children:[j.jsx(c("IGDContactSearchResultAvatar.react"),{avatarSize:"XL",candidate:b,disabled:n,isSelected:e}),j.jsx(c("IGDSBox.react"),{marginTop:2,children:j.jsx(d("IGDContactSearchResultTextContent.react").IGDContactSearchResultTitle,{candidate:b,disabled:n,inGrid:!0,textSize:"small"})})]})})}a.displayName=a.name+" [from "+f.id+"]";g.IGDSupershareContactSearchResult=a}),226);
__d("IGDAWContactSearchResultList.react",["fbt","FBLogger","IGDChatTabsEnv","IGDContactSearch.react","IGDContactSearchResult.react","IGDSBox.react","IGDSGlimmer.react","IGDSListItemPlaceholder.react","IGDSTextVariants.react","IGDSupershareConstants","IGDSupershareContactSearchResult.react","PolarisUA","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=["excludedIDs","includeGroupSearch","isPartnershipSearch","loggingProps","removeE2eeResults","searchQuery"],j,k=j||d("react"),l="medium",m=h._(/*BTDS*/"No account found."),n=h._(/*BTDS*/"Suggested"),o=h._(/*BTDS*/"Start a conversation with a creator in your partnership inbox to help manage your conversations more effectively."),p={avatarPlaceholder:{backgroundColor:"x1hmx34t",borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",height:"x14z7g9a",width:"x7mnju",$$css:!0},desktopContactsContainer:{columnGap:"x40hh3e",maxWidth:"x1tlaipk","@media (max-width: 500px)_maxWidth":"x1c90odo",$$css:!0},mwebContactsContainer:{columnGap:"x40hh3e",maxWidth:"x1ml4wws","@media (max-width: 375px)_columnGap":"xz7isgl","@media (max-width: 375px)_maxWidth":"xh6uzej",$$css:!0},placeholderBoxForBottomSheet:{paddingBottom:"xwib8y2",paddingInlineEnd:"x14vy60q",paddingInlineStart:"xyiysdx",paddingTop:"x1y1aw1k",$$css:!0},placeholderBoxForDialog:{paddingTop:"x1y1aw1k",paddingInlineEnd:"xf159sx",paddingBottom:"xwib8y2",paddingInlineStart:"xmzvs34",$$css:!0},supershareScrollContainer:{overscrollBehavior:"xish69e",$$css:!0},textPlaceholder:{backgroundColor:"x1hmx34t",height:"x1kpxq89",width:"xh8yej3",$$css:!0}};function q(a){var b=a.children,e=a.childrenMarginTop;e=e===void 0?4:e;var f=a.label,g=a.onScroll,h=a.paddingX;a=a.xstyle;return k.jsxs(c("IGDSBox.react"),{"data-testid":void 0,flex:"grow",onScroll:g,overflow:"scrollY",paddingX:h,xstyle:a,children:[f!=null?k.jsx(c("IGDSBox.react"),{margin:4,marginBottom:0,children:k.jsx(d("IGDSTextVariants.react").IGDSTextBodyEmphasized,{elementType:"h2",children:f})}):null,k.jsx(c("IGDSBox.react"),{marginTop:e,children:b})]})}q.displayName=q.name+" [from "+f.id+"]";function r(){return k.jsx(c("IGDSBox.react"),{columnGap:4,direction:"row",justifyContent:"center",rowGap:1,wrap:!0,children:Array(12).fill(0).map(function(a,b){return k.jsx(c("IGDSBox.react"),{justifyContent:"center",xstyle:[d("PolarisUA").isDesktop()&&p.placeholderBoxForDialog,!d("PolarisUA").isDesktop()&&p.placeholderBoxForBottomSheet],children:k.jsxs(c("IGDSBox.react"),{alignItems:"center",height:d("IGDSupershareConstants").SUPERSHARE_CONTACT_HEIGHT_PX,justifyContent:"center",width:d("IGDSupershareConstants").SUPERSHARE_CONTACT_WIDTH_PX,children:[k.jsx(c("IGDSGlimmer.react"),{index:b,xstyle:p.avatarPlaceholder}),k.jsx(c("IGDSBox.react"),{marginTop:2,paddingX:1,width:"100%",children:k.jsx(c("IGDSGlimmer.react"),{index:b,xstyle:p.textPlaceholder})})]})},b)})})}r.displayName=r.name+" [from "+f.id+"]";function s(){var a=d("IGDChatTabsEnv").useIsChatTabsDisplay();return k.jsx(k.Fragment,{children:Array(7).fill(0).map(function(b,d){return k.jsx(c("IGDSListItemPlaceholder.react"),{color:"elevatedHighlightBackground",fullWidth:!0,index:d,paddingX:a?4:6,paddingY:2,size:l},"igd-aw-contact_search_result_list_placeholder-"+d)})})}s.displayName=s.name+" [from "+f.id+"]";function t(){return k.jsx(q,{children:k.jsx(c("IGDSBox.react"),{paddingX:6,paddingY:3,children:k.jsx(d("IGDSTextVariants.react").IGDSTextBody,{color:"secondaryText",children:m})})})}t.displayName=t.name+" [from "+f.id+"]";function u(){return k.jsx(q,{children:k.jsx(c("IGDSBox.react"),{paddingX:6,paddingY:3,children:k.jsx(d("IGDSTextVariants.react").IGDSTextBody,{color:"secondaryText",children:o})})})}u.displayName=u.name+" [from "+f.id+"]";function v(a){var b=a.hideCheckbox,e=b===void 0?!1:b;b=a.inSearchPage;b=b===void 0?!1:b;var f=a.insetPaddingX,g=a.isLoading,h=a.isPartnershipSearch,i=a.isSupershare,j=a.onScroll,m=a.onSearchResultPress,o=a.removeE2eeResults,v=a.searchQuery,w=a.searchResultItems,x=a.searchType,y=a.selectedCandidates;if(h===!0&&v.length===0)return k.jsx(u,{});if(w.size===0&&!g&&v.length!==0)return k.jsx(t,{});a=!v&&w.size!==0&&i!==!0?n:null;var z=Array.from(w.entries());o===!0&&(z=z.filter(function(a){a[0];a=a[1];return a.candidate.isE2EE!==!0}));if(i===!0&&!v){h=Array.from(y.entries()).filter(function(a){var b=a[0];a[1];return z.find(function(a){var c=a[0];a[1];return b===c})==null}).toReversed();(w=z).unshift.apply(w,h)}return i===!0&&b!==!0?k.jsxs(q,{childrenMarginTop:0,label:a,onScroll:j,paddingX:f,xstyle:p.supershareScrollContainer,children:[!g&&k.jsx(c("IGDSBox.react"),{alignItems:"center",width:"100%",children:k.jsx(c("IGDSBox.react"),{direction:"row",paddingY:2,rowGap:1,width:"100%",wrap:!0,xstyle:[d("PolarisUA").isDesktop()&&p.desktopContactsContainer,!d("PolarisUA").isDesktop()&&p.mwebContactsContainer],children:z.map(function(a){var b=a[0],e=a[1];a=y.has(e.candidate.id);switch(e.type){case"thread":case"user":return k.jsx(d("IGDSupershareContactSearchResult.react").IGDSupershareContactSearchResult,{candidate:e,isSelected:a,onPress:function(){m(e)},searchType:x},b);default:throw c("FBLogger")("igd_web").mustfixThrow("Expected recipient of type user or thread",e)}})})}),g&&k.jsx(r,{})]}):k.jsxs(q,{label:a,onScroll:j,paddingX:f,children:[z.map(function(a){var b=a[0],f=a[1];a=y.has(f.candidate.id);switch(f.type){case"thread":case"user":return k.jsx(d("IGDContactSearchResult.react").IGDContactSearchResult,{avatarSize:l,candidate:f,hideCheckbox:e,isSelected:a,onPress:function(){m(f)},searchType:x},b);default:throw c("FBLogger")("igd_web").mustfixThrow("Expected recipient of type user or thread",f)}}),g&&k.jsx(s,{})]})}v.displayName=v.name+" [from "+f.id+"]";function a(a){var b=a.excludedIDs,d=a.includeGroupSearch,e=a.isPartnershipSearch;a.loggingProps;var f=a.removeE2eeResults,g=a.searchQuery,h=babelHelpers.objectWithoutPropertiesLoose(a,i);return k.jsx(c("IGDContactSearch.react"),{excludedIDs:b,includeGroupSearch:d,isPartnershipSearch:e,searchQuery:g,children:function(a,b){return k.jsx(v,babelHelpers["extends"]({},h,{isLoading:a,isPartnershipSearch:e,removeE2eeResults:f,searchQuery:g,searchResultItems:b}))}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("PolarisDirectSearchUserContainerToken.react",["fbt","IGDSBox.react","IGDSButton.react","IGDSXPanoFilledIcon.react","PolarisIGCoreSVGIconButton.react","PolarisUA","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(14),e=a.onClick,f=a.onRemoveClick,g=a.selectedToken,i=a.userId;a=a.username;g=g===i;var k=g?"primaryButton":"secondaryAction",l=g?"web-always-white":"ig-primary-button",m=g?"white_link":"primary_link",n;b[0]!==m||b[1]!==e||b[2]!==a?(n=j.jsx(c("IGDSButton.react"),{label:a,onClick:e,variant:m}),b[0]=m,b[1]=e,b[2]=a,b[3]=n):n=b[3];b[4]!==g||b[5]!==f||b[6]!==l||b[7]!==i||b[8]!==a?(m=(g||d("PolarisUA").isDesktop())&&j.jsx(c("IGDSBox.react"),{justifyContent:"center",marginStart:2,position:"relative",children:j.jsx(c("PolarisIGCoreSVGIconButton.react"),{onClick:function(){return f(i)},padding:0,children:j.jsx(c("IGDSXPanoFilledIcon.react"),{alt:h._(/*BTDS*/"Remove {recipient name}",[h._param("recipient name",a)]),color:l,size:12})})}),b[4]=g,b[5]=f,b[6]=l,b[7]=i,b[8]=a,b[9]=m):m=b[9];b[10]!==k||b[11]!==n||b[12]!==m?(e=j.jsxs(c("IGDSBox.react"),{color:k,direction:"row",height:26,justifyContent:"center",margin:1,paddingX:3,position:"relative",shape:"extraRounded",children:[n,m]}),b[10]=k,b[11]=n,b[12]=m,b[13]=e):e=b[13];return e}g["default"]=a}),226);
__d("IGDirectSearchUserContainerTokenField",["fbt","FocusInertRegion.react","IGDSBox.react","IGDSButton.react","IGDSCircleXPanoFilled24Icon.svg.react","IGDSIconButton.react","IGDSSearchPanoOutlineIcon.react","IGDSTextInput.react","IGDSTextVariants.react","IGDThreadListNewMessageLoggingDataContext","Keys","MessengerWebUXLogger","PolarisDOMListener.react","PolarisDirectSearchUserContainerToken.react","PolarisDirectStrings","PolarisIGTheme.react","PolarisSearchStrings","PolarisUA","focusScopeQueries","nullthrows","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useCallback,l=b.useEffect,m=b.useId,n=b.useImperativeHandle,o=b.useRef,p=b.useState,q={root:{paddingBottom:null,paddingInlineStart:"xf7dkkf",paddingInlineEnd:"xv54qhq",paddingLeft:null,paddingRight:null,paddingTop:null,maxHeight:"x1mu601j",overflowX:"xw2csxc",overflowY:"x1odjw0f",alignItems:"x1pha0wt",$$css:!0},rootMobile:{paddingTop:"xexx8yu",paddingInlineEnd:"xv54qhq",paddingBottom:"x18d9i69",paddingInlineStart:"xf7dkkf",height:"x5kalc8",overflowX:"x6ikm8r",overflowY:"x10wlt62",alignItems:"x6s0dn4",$$css:!0},rootSupershare:{paddingBottom:null,paddingInlineStart:"x1g0dm76",paddingInlineEnd:"xpdmqnj",paddingLeft:null,paddingRight:null,paddingTop:null,marginTop:"xw7yly9",marginBottom:"x1e56ztr",$$css:!0},recipientsContainerMobile:{overflowX:"xw2csxc",overflowY:"x10wlt62",alignItems:"x6s0dn4",height:"x5yr21d",$$css:!0}};function a(a){var b=a.ref,e=a.inSearchPage,f=a.onCancelSearch,g=a.isSupershare,i=a.onClearQuery,s=a.onRemoveRecipient,t=a.onTextInputChange,u=a.query,v=a.recipients,w=a.autoFocus,x=a.isPartnershipSearch;x=x===void 0?!1:x;var y=a.onFocus,z=d("PolarisUA").isMobile();a=p(null);var A=a[0],B=a[1],C=o(null),D=o(null);l(function(){w&&C.current&&C.current.focus()},[w]);n(b,function(){return{focus:function(){var a;(a=C.current)==null||a.focus()},blur:function(){var a;(a=C.current)==null||a.blur()}}});a=k(function(){var a;(a=C.current)==null||a.blur()},[]);r(a);var E=d("IGDThreadListNewMessageLoggingDataContext").useFlowInstanceIdContext(),F=c("MessengerWebUXLogger").useInteractionLogger(),G=function(a){F==null||F({eventName:"unselect_member",flowInstanceId:E}),B(null),s(a)},H=[].concat(Array.from(v.keys()));l(function(){D.current&&(z?D.current.scrollLeft=D.current.scrollWidth:g!=!0&&D.current.scrollIntoView(!1))},[H.length]);b=d("PolarisIGTheme.react").isDarkMode()?"secondaryBackground":"highlightBackground";a=m();b=j.jsx(c("IGDSTextInput.react"),{id:a,autoComplete:"off",backgroundColor:g===!0?b:"transparent",name:"queryBox",onChange:t,onFocus:function(){B(null),y&&y()},onKeyDown:function(a){a.keyCode===c("Keys").BACKSPACE&&u.length===0&&B(H[H.length-1])},placeholder:g===!0?d("PolarisSearchStrings").SEARCH_PLACEHOLDER_TEXT:d("PolarisDirectStrings").SEARCH_USER_BOX_PLACEHOLDER,ref:C,spellCheck:!1,startAdornment:g===!0?j.jsx(c("IGDSBox.react"),{marginStart:2,children:j.jsx(c("IGDSSearchPanoOutlineIcon.react"),{size:16,color:"ig-secondary-text",alt:d("PolarisSearchStrings").SEARCH_PLACEHOLDER_TEXT})}):null,endAdornment:g===!0&&u.length>0?j.jsx(c("IGDSIconButton.react"),{onClick:i,children:j.jsx(c("IGDSCircleXPanoFilled24Icon.svg.react"),{color:"rgb(var(--ig-secondary-text))"})}):null,style:"borderless",value:u});t=g===!0&&d("PolarisUA").isTouchDevice()?j.jsx(c("FocusInertRegion.react"),{focusQuery:d("focusScopeQueries").tabbableScopeQuery,children:b}):b;return j.jsxs(c("IGDSBox.react"),{direction:"row",xstyle:[z?q.rootMobile:q.root,g===!0?q.rootSupershare:null],children:[g!==!0&&j.jsx(c("IGDSBox.react"),{justifyContent:"start",children:j.jsx(d("IGDSTextVariants.react").IGDSTextSection,{zeroMargin:!0,elementType:"label",labelFor:a,children:d("PolarisDirectStrings").TO_LABEL_STRING})}),j.jsxs(c("IGDSBox.react"),{containerRef:D,direction:"row",wrap:!z,flex:"grow",xstyle:z?q.recipientsContainerMobile:void 0,children:[j.jsx(c("PolarisDOMListener.react"),{event:"keydown",handler:function(){A!=null&&G(A)},target:document.body}),g!==!0&&H.map(function(a){return j.jsx(c("PolarisDirectSearchUserContainerToken.react"),{onClick:function(){A===a?G(a):B(a)},onRemoveClick:G,selectedToken:A,userId:a,username:c("nullthrows")(v.get(a)).candidate.threadName},a)}),x&&H.length>0?null:t,g===!0&&e&&j.jsx(c("IGDSBox.react"),{marginStart:2,justifyContent:"center",children:j.jsx(c("IGDSButton.react"),{label:h._(/*BTDS*/"Cancel"),variant:"secondary_link",onClick:f})})]})]})}a.displayName=a.name+" [from "+f.id+"]";e=a;function r(a){l(function(){if("visualViewport"in window&&d("PolarisUA").isMobile()){var b=function(){var b=window.innerHeight>window.visualViewport.height;b||a()};window.visualViewport.addEventListener("resize",b);return function(){window.visualViewport.removeEventListener("resize",b)}}},[a])}g["default"]=e}),226);
__d("IGDAWContactSearch.react",["IGDAWContactSearchResultList.react","IGDOmnipickerLoggingUtils","IGDOmnipickerSearchLoggingContextProvider.react","IGDSBox.react","IGDSDivider.react","IGDirectSearchUserContainerTokenField","PolarisUA","react","useShowRecipientLimitReachedDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useCallback,k=b.useEffect,l=b.useRef,m=b.useState;function a(a){var b=a.addonContent,e=a.excludedIDs,f=a.includeGroupSearch,g=a.insetPaddingX,h=a.isPartnershipSearch;h=h===void 0?!1:h;var n=a.isSupershare,o=a.maxRecipients,p=o===void 0?32:o,q=a.onAddRecipient,r=a.onRemoveRecipient,s=a.recipients;o=a.searchType;var t=a.setRecipients,u=d("PolarisUA").isMobile();a=m("");var v=a[0],w=a[1],x=l(null);a=d("IGDOmnipickerSearchLoggingContextProvider.react").useIGDOmnipickerSearchLoggingContext();var y=a.searchSessionAbandoned,z=a.searchSessionClosed,A=!u&&!n;a=m(A);var B=a[0],C=a[1],D=l(null),E=j(function(){!A&&D.current&&D.current.focus()},[A]);k(function(){x.current=d("IGDOmnipickerLoggingUtils").logOmnipickerSearchStart()},[]);k(function(){x.current!=null&&z===!0&&d("IGDOmnipickerLoggingUtils").logOmnipickerSearchEndFalcoEvent(s,x.current,7)},[s,z]);k(function(){x.current!=null&&y===!0&&d("IGDOmnipickerLoggingUtils").logOmnipickerSearchEndFalcoEvent(s,x.current,8)},[y,s]);a=j(function(a){a=(a=a==null?void 0:a.target.value)!=null?a:"";w(a);d("IGDOmnipickerLoggingUtils").logOmnipickerSearchQueryChanged(a,x.current)},[]);var F=j(function(a){r==null||r();var b=new Map(s);b["delete"](a);t(b)},[r,s,t]),G=j(function(a){F(a),E()},[E,F]),H=c("useShowRecipientLimitReachedDialog")(o,p),I=j(function(a){var b=new Map(s);if(s.size>=p){H();return}b.set(a.candidate.id,a);t(b);d("IGDOmnipickerLoggingUtils").logIGDOmnipickerSearchResultSelected(v,a,Array.from(s.keys()),x.current)},[s,p,t,v,H]),J=j(function(a){var b=a.candidate.id;s.has(b)?F(b):(I(a),q==null||q());w("");(b=D.current)==null||b.blur();C(!1)},[I,q,s,F]),K=j(function(){if(u){var a;(a=D.current)==null||a.blur()}},[u]);return i.jsxs(i.Fragment,{children:[i.jsx(c("IGDSBox.react"),{paddingX:g,children:i.jsx(c("IGDirectSearchUserContainerTokenField"),{autoFocus:A,inSearchPage:B,isPartnershipSearch:h,isSupershare:n,onCancelSearch:function(){return C(!1)},onClearQuery:function(){return w("")},onFocus:function(){return C(!0)},onRemoveRecipient:G,onTextInputChange:a,query:v,recipients:s,ref:D})}),n!==!0&&i.jsx(c("IGDSDivider.react"),{style:"elevated"}),!v&&s.size===0?b:null,i.jsx(d("IGDOmnipickerSearchLoggingContextProvider.react").IGDOmnipickerSearchLoggingContextProvider,{children:i.jsx(c("IGDAWContactSearchResultList.react"),{excludedIDs:e,inSearchPage:B,includeGroupSearch:f,insetPaddingX:g,isPartnershipSearch:h,isSupershare:n,onScroll:K,onSearchResultPress:J,searchQuery:v,searchType:o,selectedCandidates:s})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("IGDShareSheetDMBlockedMessageBar.react",["fbt","MWXComposerBanner.react","MessengerWebUXLogger","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(){var a=d("react-compiler-runtime").c(5),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=h._(/*BTDS*/"You can\u2019t send or receive disappearing messages on Instagram.com yet"),a[0]=b):b=a[0];b=b;var e;a[1]===Symbol["for"]("react.memo_cache_sentinel")?(e=h._(/*BTDS*/"Some of your chats have disappearing messages turned on. To send and receive new messages in those chats, use your Instagram app."),a[1]=e):e=a[1];e=e;var f;a[2]===Symbol["for"]("react.memo_cache_sentinel")?(f={eventName:"igd_fallback_sharesheet_disabled",extraData:{is_instamadillo:"true"}},a[2]=f):f=a[2];f=c("MessengerWebUXLogger").useImpressionLoggerRef(f);a[3]!==f?(e=j.jsx(c("MWXComposerBanner.react"),{bodyText:e,headerText:b,ref:f}),a[3]=f,a[4]=e):e=a[4];return e}g["default"]=a}),226);
__d("IGDShareSheetTLCBlockedMessageBar.react",["fbt","MWXComposerBanner.react","MessengerWebUXLogger","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function k(a){var b=d("react-compiler-runtime").c(5),e=a.bodyText;a=a.headerText;var f;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f={eventName:"igd_fallback_sharesheet_disabled",extraData:{is_instamadillo_tlc:"true"}},b[0]=f):f=b[0];f=c("MessengerWebUXLogger").useImpressionLoggerRef(f);var g;b[1]!==e||b[2]!==a||b[3]!==f?(g=j.jsx(c("MWXComposerBanner.react"),{bodyText:e,headerText:a,ref:f}),b[1]=e,b[2]=a,b[3]=f,b[4]=g):g=b[4];return g}function a(){var a=d("react-compiler-runtime").c(2),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=h._(/*BTDS*/"End-to-end encrypted messages aren\u2019t available on Instagram.com yet"),a[0]=b):b=a[0];b=b;if(a[1]===Symbol["for"]("react.memo_cache_sentinel")){var c=h._(/*BTDS*/"This chat is now secured with end-to-end encryption, so you'll only be able to send and receive new messages using the Instagram app.");c=j.jsx(k,{bodyText:c,headerText:b});a[1]=c}else c=a[1];return c}function b(){var a=d("react-compiler-runtime").c(2),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=h._(/*BTDS*/"End-to-end encrypted chats aren't available on Instagram.com yet"),a[0]=b):b=a[0];b=b;if(a[1]===Symbol["for"]("react.memo_cache_sentinel")){var c=h._(/*BTDS*/"Some chats are now secured with end-to-end encryption. To send and receive new messages in those chats, use the Instagram app.");c=j.jsx(k,{bodyText:c,headerText:b});a[1]=c}else c=a[1];return c}g.IGDShareSheetTLCBlockedMessageBar=a;g.IGDShareSheetTLCBlockedMessageBarForMultipleRecipients=b}),226);
__d("IGDSecureShareSheetMessageBar.react",["IGDSBox.react","IGDSButton.react","IGDSecureShareSheetCommentTextInput.react","IGDShareSheetDMBlockedMessageBar.react","IGDShareSheetTLCBlockedMessageBar.react","PolarisTrackingNodeProvider.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.commentTextInputRef,e=a.isCommentTextInputHidden;e=e===void 0?!1:e;var f=a.isSendButtonDisabled,g=a.isSendButtonLoading,h=a.onSendClick,j=a.paddingX,k=a.recipients,l=a.sendButtonLabel,m=a.sendButtonSize,n=m===void 0?"small":m;m=a.xstyle;a=!1;var o=!1;for(var p of k){p[0];var q=p[1].candidate;q.isInstamadilloCutover?o=!0:q.isDisappearingModeSettingOn&&(a=!0)}if(o)if(k.size===1)return i.jsx(d("IGDShareSheetTLCBlockedMessageBar.react").IGDShareSheetTLCBlockedMessageBar,{});else return i.jsx(d("IGDShareSheetTLCBlockedMessageBar.react").IGDShareSheetTLCBlockedMessageBarForMultipleRecipients,{});else if(a)return i.jsx(c("IGDShareSheetDMBlockedMessageBar.react"),{});return i.jsxs(c("IGDSBox.react"),{xstyle:m,children:[i.jsx(c("IGDSBox.react"),{paddingX:j,children:i.jsx(c("IGDSecureShareSheetCommentTextInput.react"),{isHidden:e,ref:b})}),i.jsx(c("IGDSBox.react"),{margin:4,marginTop:0,paddingX:j,children:i.jsx(c("PolarisTrackingNodeProvider.react"),{trackingNode:156,children:function(a){return i.jsx("div",{ref:a,children:i.jsx(c("IGDSButton.react"),{"aria-disabled":f,"data-testid":void 0,fullWidth:!0,isDisabled:f,isLoading:g,label:l,onClick:h,size:n})})}})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("IGDSecureShareSheet.react",["FBLogger","IGDAWContactSearch.react","IGDContactSearchDialogType.flow","IGDExternalShareBar.react","IGDSBox.react","IGDSDivider.react","IGDSecureShareSheetMessageBar.react","IGDThreadTTLCUtils","InteractionTracing","PolarisDirectActionInitInbox","PolarisDirectStrings","PolarisLoggerUtils","PolarisReactRedux.react","PolarisToastActions","PolarisTrackingCodeProvider.react","isStringNullOrEmpty","polarisAdsSelectors.react","promiseDone","react","react-compiler-runtime","usePolarisMQTT","usePolarisSelector"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;b.useCallback;var j=b.useEffect,k=b.useRef,l=b.useState,m={bottomBar:{height:"x1wkxgih",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(36),e=a.adsStoryLoggingData,f=a.isPopover,g=a.isSupershare,h=a.onAddRecipient,p=a.onRemoveRecipient,q=a.onSubmitClick,r=a.post,s=c("usePolarisMQTT")();c("InteractionTracing").getPendingInteractions().forEach(function(a){a.addAnnotationBoolean("is_mqtt_available",Boolean(s!=null))});a=d("polarisAdsSelectors.react").useFeedAdInfo(r.id,o);var t=k(null),u=l(!1),v=u[0],w=u[1];b[0]===Symbol["for"]("react.memo_cache_sentinel")?(u=new Map(),b[0]=u):u=b[0];u=l(u);var x=u[0];u=u[1];var y=d("PolarisReactRedux.react").useDispatch(),z=c("usePolarisSelector")(n),A,B;b[1]!==y||b[2]!==z?(A=function(){z||y(d("PolarisDirectActionInitInbox").initInbox())},B=[y,z],b[1]=y,b[2]=z,b[3]=A,b[4]=B):(A=b[3],B=b[4]);j(A,B);b[5]!==y||b[6]!==q||b[7]!==r.productType||b[8]!==x?(A=function(){var a;w(!0);var b=new Map(),e=new Map();x.forEach(function(a){a.candidate.isDisappearingModeSettingOn||a.candidate.isInstamadilloCutover||d("IGDThreadTTLCUtils").isIGDTTLCEnabledForIGDCandidate(a.candidate,r.productType)?e.set(a.candidate.id,a):c("isStringNullOrEmpty")(a.candidate.igid)||b.set(a.candidate.igid,a)});a=(a=t.current)==null?void 0:a.getComment();c("promiseDone")(q({instamadilloRecipients:e,openRecipients:b},a),function(){w(!1)},function(a){w(!1),c("FBLogger")("igd_web").mustfix("Error sharing attachment to users in sharesheet:"+a.message),y(d("PolarisToastActions").showToast({text:d("PolarisDirectStrings").GENERIC_ERROR_MESSAGE}))})},b[5]=y,b[6]=q,b[7]=r.productType,b[8]=x,b[9]=A):A=b[9];B=A;A=x.size!==0;v=v;var C=s==null||v||!A,D;g===!0?D=3:f===!0&&(D=4);f="";var E=!1;if((e==null?void 0:e.tracking_token)!=null){var F;f=(F=e==null?void 0:e.tracking_token)!=null?F:"";E=(e==null?void 0:e.tracking_token)!=null}else(a==null?void 0:a.ad_id)!=null&&(a==null?void 0:a.tracking_token)!=null&&(f=a.tracking_token,E=!0);if(b[10]!==r.id||b[11]!==((F=r.owner)==null?void 0:F.id)){F=(e=r.owner)!=null&&e.id?d("PolarisLoggerUtils").getFormattedMediaID(r.id,(a=r.owner)==null?void 0:a.id):"";b[10]=r.id;b[11]=(e=r.owner)==null?void 0:e.id;b[12]=F}else F=b[12];b[13]!==g||b[14]!==h||b[15]!==p||b[16]!==D||b[17]!==x?(a=i.jsx(c("IGDSBox.react"),{flex:"grow",children:i.jsx(c("IGDAWContactSearch.react"),{includeGroupSearch:!0,insetPaddingX:D,isSupershare:g,maxRecipients:32,onAddRecipient:h,onRemoveRecipient:p,recipients:x,searchType:d("IGDContactSearchDialogType.flow").IGDContactSearchDialogType.SHARESHEET,setRecipients:u})}),b[13]=g,b[14]=h,b[15]=p,b[16]=D,b[17]=x,b[18]=a):a=b[18];b[19]===Symbol["for"]("react.memo_cache_sentinel")?(e=i.jsx(c("IGDSDivider.react"),{style:"elevated"}),b[19]=e):e=b[19];b[20]!==A||b[21]!==C||b[22]!==v||b[23]!==E||b[24]!==g||b[25]!==B||b[26]!==D||b[27]!==r||b[28]!==x?(u=g===!0?x.size===0&&!E?i.jsx(c("IGDExternalShareBar.react"),{post:r,xstyle:m.bottomBar}):i.jsx(c("IGDSecureShareSheetMessageBar.react"),{commentTextInputRef:t,isSendButtonDisabled:C,isSendButtonLoading:v,onSendClick:B,paddingX:D,recipients:x,sendButtonLabel:x.size<2?d("PolarisDirectStrings").SEND_BUTTON_STRING:d("PolarisDirectStrings").SEND_SEPARATELY_BUTTON_STRING,xstyle:m.bottomBar}):i.jsx(c("IGDSecureShareSheetMessageBar.react"),{commentTextInputRef:t,isCommentTextInputHidden:!A,isSendButtonDisabled:C,isSendButtonLoading:v,onSendClick:B,paddingX:D,recipients:x,sendButtonLabel:x.size<2?d("PolarisDirectStrings").SEND_BUTTON_STRING:d("PolarisDirectStrings").SEND_SEPARATELY_BUTTON_STRING}),b[20]=A,b[21]=C,b[22]=v,b[23]=E,b[24]=g,b[25]=B,b[26]=D,b[27]=r,b[28]=x,b[29]=u):u=b[29];b[30]!==E||b[31]!==F||b[32]!==a||b[33]!==u||b[34]!==f?(h=i.jsx(c("IGDSBox.react"),{"data-testid":void 0,flex:"grow",children:i.jsxs(c("PolarisTrackingCodeProvider.react"),{isSponsored:E,m_pk:F,trackingToken:f,children:[a,e,u]})}),b[30]=E,b[31]=F,b[32]=a,b[33]=u,b[34]=f,b[35]=h):h=b[35];return h}function n(a){return a.direct.inboxLoaded}function o(a){return a}g["default"]=a}),98);
__d("IGDSecureShareSheetContainer.react",["IGDContactSearchDialogType.flow","IGDSecureShareSheet.react","IGDSecureShareSheetS2SInstanceKeyContextProvider.react","InstagramAdDirectReshareSendFalcoEvent","InstagramODS","PolarisDirectLogger","QPLUserFlow","asyncToGeneratorRuntime","emptyFunction","qpl","react","react-compiler-runtime","requireDeferred","useIGDSecureShareSheetInteractionLogger","useIGDSecureShareSheetS2SLogger","usePolarisAnalyticsContext"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=c("requireDeferred")("DirectComposeSelectRecipientFalcoEvent").__setRef("IGDSecureShareSheetContainer.react"),k=c("requireDeferred")("DirectReshareSendFalcoEvent").__setRef("IGDSecureShareSheetContainer.react");function l(a){var e=d("react-compiler-runtime").c(35),f=a.adsStoryLoggingData,g=a.flowInstanceId,h=a.isPopover,l=a.isSupershare,n=a.onClose,p=a.onSubmit;a=a.post;var r=n===void 0?c("emptyFunction"):n,s=c("usePolarisAnalyticsContext")(),t=c("useIGDSecureShareSheetS2SLogger")(),u=d("useIGDSecureShareSheetInteractionLogger").useLogShareSheetInteraction();if(!a.id)return null;e[0]!==s||e[1]!==g?(n={flowInstanceId:g,shareType:d("IGDContactSearchDialogType.flow").IGDContactSearchDialogType.SHARESHEET,source:s},e[0]=s,e[1]=g,e[2]=n):n=e[2];var v=n;e[3]!==u||e[4]!==v||e[5]!==t?(g=function(a){t.markShareSuccess(a),c("QPLUserFlow").endSuccess(c("qpl")._(379205139,"1723")),u("igd_sharesheet_share_success",babelHelpers["extends"]({},v,{recipientIDs:[a]}))},e[3]=u,e[4]=v,e[5]=t,e[6]=g):g=e[6];var w=g;e[7]!==u||e[8]!==v||e[9]!==t?(n=function(a,b){t.markShareFail(a,b),c("QPLUserFlow").endFailure(c("qpl")._(379205139,"1723"),a.name),u("igd_sharesheet_share_error",babelHelpers["extends"]({},v,{recipientIDs:[b]}))},e[7]=u,e[8]=v,e[9]=t,e[10]=n):n=e[10];var x=n,y=q;e[11]!==f||e[12]!==s||e[13]!==u||e[14]!==v||e[15]!==r||e[16]!==x||e[17]!==w||e[18]!==p||e[19]!==t?(g=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e;e=[].concat(Array.from((e=(e=a.openRecipients)==null?void 0:e.keys())!=null?e:[]),Array.from((e=(e=a.instamadilloRecipients)==null?void 0:e.keys())!=null?e:[]));var g=babelHelpers["extends"]({},v,{messageLength:b==null?void 0:b.length,recipientIDs:e});t.markShareStart(e,g,y(a));u("igd_sharesheet_share_attempt",g);k.onReady(o);c("QPLUserFlow").addPoint(c("qpl")._(379205139,"1723"),"share_sheet_send_click");(f==null?void 0:f.ad_id)!=null&&(c("InstagramODS").incr("web.ads.story.share"),c("InstagramAdDirectReshareSendFalcoEvent").log(function(){return f}));d("PolarisDirectLogger").DirectLogger.logDirectEvent("DirectShareSheet","share_sheet_send",{referral:s});yield p(a,b,w,x);r()});return function(b,c){return a.apply(this,arguments)}}(),e[11]=f,e[12]=s,e[13]=u,e[14]=v,e[15]=r,e[16]=x,e[17]=w,e[18]=p,e[19]=t,e[20]=g):g=e[20];n=g;e[21]!==u||e[22]!==v?(g=function(){u("igd_contact_search_add_recipient",v),j.onReady(m)},e[21]=u,e[22]=v,e[23]=g):g=e[23];g=g;var z;e[24]!==u||e[25]!==v?(z=function(){u("igd_contact_search_remove_recipient",v)},e[24]=u,e[25]=v,e[26]=z):z=e[26];z=z;var A;e[27]!==f||e[28]!==h||e[29]!==l||e[30]!==g||e[31]!==z||e[32]!==n||e[33]!==a?(A=i.jsx(c("IGDSecureShareSheet.react"),{adsStoryLoggingData:f,isPopover:h,isSupershare:l,onAddRecipient:g,onRemoveRecipient:z,onSubmitClick:n,post:a}),e[27]=f,e[28]=h,e[29]=l,e[30]=g,e[31]=z,e[32]=n,e[33]=a,e[34]=A):A=e[34];return A}function m(a){return a.log(n)}function n(){return{entry_point:"DIRECT_RESHARE_SHEET",position:String(0),relative_position:String(0)}}function o(a){return a.log(p)}function p(){return{entry_point:"DIRECT_RESHARE_SHEET"}}function q(a){return function(b){var c;c=(c=a.openRecipients)==null||(c=c.get(b))==null?void 0:c.candidate;if(c!=null)return{bool:{is_dm:c.isDisappearingModeSettingOn,is_instamadillo_tlc:c.isInstamadilloCutover}};b=(c=a.instamadilloRecipients)==null||(c=c.get(b))==null?void 0:c.candidate;if(b!=null)return{bool:{is_dm:b.isDisappearingModeSettingOn,is_instamadillo_tlc:b.isInstamadilloCutover}}}}function a(a){return i.jsx(d("IGDSecureShareSheetS2SInstanceKeyContextProvider.react").IGDSecureShareSheetS2SInstanceKeyContextProvider,{children:i.jsx(l,babelHelpers["extends"]({},a))})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("IGDSecureShareSheetDialog.react",["IGDContactSearchDialogType.flow","IGDSDialogLegacy.react","IGDSecureShareSheetContainer.react","IGDSecureShareSheetHeader.react","PolarisDirectStrings","PolarisGNVManagerProvider.react","QPLUserFlow","emptyFunction","qpl","react","react-compiler-runtime","requireDeferred","useIGDSecureShareSheetInteractionLogger","useMatchMedia","usePolarisAnalyticsContext"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=c("requireDeferred")("ShareSheetImpressionFalcoEvent").__setRef("IGDSecureShareSheetDialog.react"),k={dialogContainer:{display:"x78zum5",flexDirection:"xdt5ytf",$$css:!0}};function a(a){var b,e=d("react-compiler-runtime").c(28),f=a.adsStoryLoggingData,g=a.flowInstanceId,h=a.onClose,l=a.onSubmit,m=a.post,n=h===void 0?c("emptyFunction"):h;a=c("useMatchMedia")("(max-width: 736px)");var o=c("usePolarisAnalyticsContext")(),p=d("useIGDSecureShareSheetInteractionLogger").useLogShareSheetInteraction();e[0]!==o||e[1]!==g?(h={flowInstanceId:g,shareType:d("IGDContactSearchDialogType.flow").IGDContactSearchDialogType.SHARESHEET,source:o},e[0]=o,e[1]=g,e[2]=h):h=e[2];var q=h;e[3]!==o||e[4]!==g?(h={flowInstanceId:g,shareType:d("IGDContactSearchDialogType.flow").IGDContactSearchDialogType.SHARESHEET,source:o},e[3]=o,e[4]=g,e[5]=h):h=e[5];if(e[6]!==o||e[7]!==m.id||e[8]!==((b=m.owner)==null?void 0:b.id)){var r;b=function(){c("QPLUserFlow").addPoint(c("qpl")._(379205139,"1723"),"share_modal_shown"),j.onReady(function(a){return a.log(function(){var a;return{media_author_id:(a=m.owner)==null?void 0:a.id,media_id:m.id,module:o}})})};e[6]=o;e[7]=m.id;e[8]=(r=m.owner)==null?void 0:r.id;e[9]=b}else b=e[9];r=d("useIGDSecureShareSheetInteractionLogger").useLogShareSheetImpressionRef(h,b);if(!m.id)return null;e[10]!==p||e[11]!==q||e[12]!==n?(h=function(){c("QPLUserFlow").endCancel(c("qpl")._(379205139,"1723")),p("igd_sharesheet_close",q),n()},e[10]=p,e[11]=q,e[12]=n,e[13]=h):h=e[13];b=h;h=a?"fullscreen":"large";e[14]!==b?(a=i.jsx(c("IGDSecureShareSheetHeader.react"),{onCloseClick:b}),e[14]=b,e[15]=a):a=e[15];var s;e[16]!==f||e[17]!==g||e[18]!==n||e[19]!==l||e[20]!==m?(s=i.jsx(c("IGDSecureShareSheetContainer.react"),{adsStoryLoggingData:f,flowInstanceId:g,onClose:n,onSubmit:l,post:m}),e[16]=f,e[17]=g,e[18]=n,e[19]=l,e[20]=m,e[21]=s):s=e[21];e[22]!==b||e[23]!==r||e[24]!==h||e[25]!==a||e[26]!==s?(f=i.jsx(c("PolarisGNVManagerProvider.react"),{children:i.jsxs(c("IGDSDialogLegacy.react"),{enablePopInAnimation:!0,fixedHeight:!0,fixedWidth:!0,innerContentXStyle:k.dialogContainer,label:d("PolarisDirectStrings").SHARE_TITLE,onClose:b,ref:r,size:h,children:[a,s]})}),e[22]=b,e[23]=r,e[24]=h,e[25]=a,e[26]=s,e[27]=f):f=e[27];return f}g["default"]=a}),98);
__d("MWSearchQPLLogger",["MAWLoggerUtils","QPLUserFlow","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h={hasStarted:!1,instanceKey:d("MAWLoggerUtils").getInstanceKey(),query:null,sessionInstanceId:null},i=c("qpl")._(25301700,"2966");function j(){h.hasStarted=!1,h.query=null}function a(a){var b=a.queryString,e=a.sessionInstanceId;a=a.surface;if(h.query!=null&&b==="")return h.instanceKey;h.hasStarted&&k();h.instanceKey=d("MAWLoggerUtils").getInstanceKey();h.hasStarted=!0;h.query=b!=null?b:"";h.sessionInstanceId=e;c("QPLUserFlow").start(i,{instanceKey:h.instanceKey});l({annotations:{"int":{query_length:(e=b==null?void 0:b.length)!=null?e:0},string:{surface:a}}});return h.instanceKey}function k(a){if(!h.hasStarted)return;c("QPLUserFlow").endCancel(i,{annotations:{string:{end_action:a!=null?a:"unknown"}},instanceKey:h.instanceKey});j()}function b(a){var b=a.annotations;a=a.point;if(!h.hasStarted)return;c("QPLUserFlow").addPoint(i,a,{instanceKey:h.instanceKey});b!=null&&c("QPLUserFlow").addAnnotations(i,b,{instanceKey:h.instanceKey})}function l(a){a=a.annotations;if(!h.hasStarted)return;c("QPLUserFlow").addAnnotations(i,a,{instanceKey:h.instanceKey})}function e(a){var b=a.queryString,d=a.renderIndex,e=a.sessionInstanceId;a=a.source;if(!h.hasStarted)return;e===h.sessionInstanceId&&b===h.query&&c("QPLUserFlow").addPoint(i,"render_search_result_"+d,{data:{"int":{render_index:d},string:{source:a!=null?a:"unknown"}},instanceKey:h.instanceKey})}function f(){if(!h.hasStarted)return;c("QPLUserFlow").endSuccess(i,{instanceKey:h.instanceKey});j()}g.qplStart=a;g.qplCancel=k;g.qplAddPoint=b;g.qplAddAnnotations=l;g.renderSearchResult=e;g.qplSuccess=f}),98);
__d("PolarisStoriesV3ShareDialog.react",["IGDSecureShareSheetDialog.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(2),e;b[0]!==a?(e=i.jsx(c("IGDSecureShareSheetDialog.react"),babelHelpers["extends"]({},a)),b[0]=a,b[1]=e):e=b[1];return e}g["default"]=a}),98);